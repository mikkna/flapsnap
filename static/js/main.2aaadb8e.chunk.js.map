{"version":3,"sources":["Item/utils.js","Item/ItemComponent.js","Item/Item.js","Item/NewItemForm.js","Position/utils.js","Position/Position.js","Draggable/Draggable.js","Draggable/Undraggable.js","Group/GroupComponent.js","Group/utils.js","App.js","index.js"],"names":["isLink","str","isUrl","getStyleObject","position","left","x","top","y","ItemComponent","title","onClick","otherProps","useState","deleted","setDeleted","setTimeout","className","classnames","href","rel","target","e","stopPropagation","replace","defaultProps","Item","timeStamp","Date","now","items","this","NewItemFrom","isGrouped","onCreate","onClose","newItemTitle","setNewItemTitle","style","onSubmit","event","preventDefault","length","item","group","type","autoFocus","value","onChange","onKeyDown","keyCode","getOffset","el","rect","getBoundingClientRect","window","scrollX","scrollY","Position","Draggable","ref","createRef","state","dragPosition","dragStartOffset","isValidDragTarget","closest","handleItemDragStart","pointerPosition","pageX","pageY","elementPosition","currentTarget","document","addEventListener","handleItemDrag","newPosition","setState","handleItemDragEnd","removeEventListener","props","onDragEnd","onMouseDown","onMouseUp","getStyle","children","Component","Undraggable","rest","React","memo","onRemove","shouldShowItemFormByDefault","showNewItemForm","setShowNewItemForm","toggleNewItemForm","cloneItem","params","transform","tag","order","editedGroup","map","find","parseInt","key","data-id","filter","i","handleItemRemove","NewItemForm","text","textarea","createElement","body","appendChild","select","execCommand","removeChild","copyToClipboard","itemTitles","join","getCopiedText","App","db","userId","history","setHistory","setItems","newItemPosition","setNewItemPosition","isObfuscated","setIsObfuscated","setItemsAndSave","newItems","saveHistory","collection","doc","set","JSON","parse","stringify","handleItemChange","newValue","oldValue","filteredItems","handleUndo","newHistory","pop","mapGroup","newPos","useEffect","metaKey","ctrlKey","get","then","currentDoc","exists","data","groupElements","obfuscated","process","visible","role","aria-label","firebase","require","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","user","a","provider","auth","GoogleAuthProvider","setPersistence","Auth","Persistence","LOCAL","signInWithPopup","ReactDOM","render","uid","getElementById","onAuthStateChanged","init"],"mappings":"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","file":"static/js/main.2aaadb8e.chunk.js","sourcesContent":["import isUrl from \"is-url\";\n\nexport function isLink(str) {\n  return isUrl(str);\n}\n\nexport function getStyleObject(position) {\n  if (!position) return {};\n\n  return { left: position.x, top: position.y };\n}\n","import React, { useState } from \"react\";\nimport Types from \"prop-types\";\nimport { isLink } from \"./utils\";\nimport classnames from \"classnames\";\n\nconst ItemComponent = ({ title, onClick, ...otherProps }) => {\n  const [deleted, setDeleted] = useState(false);\n\n  function handleClick() {\n    setDeleted(true);\n\n    setTimeout(() => {\n      onClick();\n    }, 200);\n  }\n\n  function parseTitle() {\n    let urlSliceRegex = /(https?:\\/\\/)?(www\\.)?/;\n    if (isLink(title)) {\n      return title.replace(urlSliceRegex, \"\");\n    }\n    return title;\n  }\n\n  return (\n    <li\n      {...otherProps}\n      onClick={handleClick}\n      className={classnames(\"item \", {\n        \"item--collapse\": deleted,\n      })}\n    >\n      <span className=\"item-content item-content-block\" title={title}>\n        {isLink(title) ? (\n          <a\n            href={title}\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n            onClick={(e) => {\n              e.stopPropagation();\n            }}\n          >\n            {parseTitle()}\n          </a>\n        ) : (\n          title\n        )}\n      </span>\n    </li>\n  );\n};\n\nItemComponent.propTypes = {\n  title: Types.string.isRequired,\n  onClick: Types.func,\n};\n\nItemComponent.defaultProps = {\n  onClick: () => {},\n};\n\nexport default ItemComponent;\n","export default class Item {\n  constructor({\n    title = \"\",\n    position = null,\n    timeStamp = Date.now(),\n    items,\n  } = {}) {\n    this.title = title;\n    this.position = position;\n    this.timeStamp = timeStamp;\n    this.items = items;\n  }\n}\n","import React, { useState } from \"react\";\nimport Types from \"prop-types\";\nimport Item from \"./Item\";\nimport { getStyleObject } from \"./utils\";\nimport classnames from \"classnames\";\n\nconst NewItemFrom = ({ isGrouped = false, position, onCreate, onClose }) => {\n  const [newItemTitle, setNewItemTitle] = useState(\"\");\n\n  function handleCreateItem(event) {\n    event.preventDefault();\n\n    if (!newItemTitle.length) return;\n\n    const item = new Item({ position, title: newItemTitle });\n    onCreate(item);\n    setNewItemTitle(\"\");\n  }\n\n  function handleInputKeyDown(event) {\n    switch (event.keyCode) {\n      case 27: // esc\n        return onClose();\n      case 8: // backspace\n        if (newItemTitle.length) return;\n        return onClose();\n      default:\n        return;\n    }\n  }\n\n  function handleTitleChange({ target: { value } }) {\n    setNewItemTitle(value);\n  }\n\n  function handleCreateGroup() {\n    const group = new Item({\n      position: position,\n      title: newItemTitle,\n      items: [],\n    });\n    onCreate(group);\n  }\n\n  return (\n    <form\n      className={classnames(\"new-item item\", { \"item--absolute\": position })}\n      style={getStyleObject(position)}\n      onSubmit={isGrouped ? handleCreateItem : handleCreateGroup}\n    >\n      <input\n        type=\"text\"\n        className=\"item-content\"\n        autoFocus={true}\n        value={newItemTitle}\n        onChange={handleTitleChange}\n        onKeyDown={handleInputKeyDown}\n      />\n    </form>\n  );\n};\n\nNewItemFrom.propTypes = {\n  isGrouped: Types.bool,\n  position: Types.shape({}),\n  onCreate: Types.func.isRequired,\n  onClose: Types.func.isRequired,\n};\n\nexport default NewItemFrom;\n","export function getOffset(el) {\n  const rect = el.getBoundingClientRect();\n  return {\n    x: rect.left + window.scrollX,\n    y: rect.top + window.scrollY,\n  };\n}\n","export default class Position {\n  constructor({ x = 0, y = 0 } = {}) {\n    this.x = x;\n    this.y = y;\n  }\n}\n","import React, { Component, createRef } from \"react\";\nimport Types from \"prop-types\";\nimport Position, { getOffset } from \"../Position\";\n\nclass Draggable extends Component {\n  static propTypes = {\n    children: Types.node.isRequired,\n    onDragEnd: Types.func.isRequired,\n    position: Types.shape({\n      x: Types.number.isRequired,\n      y: Types.number.isRequired,\n    }).isRequired,\n  };\n\n  ref = createRef();\n\n  state = {\n    dragPosition: null,\n  };\n\n  dragStartOffset = null;\n\n  isValidDragTarget = (target) => {\n    const isChildOfGroupItems = !!target.closest(\".undraggable\");\n    return !isChildOfGroupItems;\n  };\n\n  handleItemDragStart = (event) => {\n    if (!this.isValidDragTarget(event.target)) return;\n\n    const pointerPosition = { x: event.pageX, y: event.pageY };\n    const elementPosition = getOffset(event.currentTarget);\n    this.dragStartOffset = {\n      x: pointerPosition.x - elementPosition.x,\n      y: pointerPosition.y - elementPosition.y,\n    };\n\n    document.addEventListener(\"mousemove\", this.handleItemDrag);\n  };\n\n  handleItemDrag = (event) => {\n    const newPosition = new Position({\n      x: event.pageX - this.dragStartOffset.x,\n      y: event.pageY - this.dragStartOffset.y,\n    });\n\n    this.setState({\n      dragPosition: newPosition,\n    });\n  };\n\n  handleItemDragEnd = () => {\n    document.removeEventListener(\"mousemove\", this.handleItemDrag);\n\n    if (this.state.dragPosition) {\n      this.props.onDragEnd({ ...this.state.dragPosition });\n      this.setState({ dragPosition: null });\n    }\n  };\n\n  getStyle(position) {\n    return {\n      left: position.x,\n      top: position.y,\n    };\n  }\n\n  render() {\n    return (\n      <div\n        className=\"draggable item--absolute\"\n        ref={this.ref}\n        onMouseDown={this.handleItemDragStart}\n        onMouseUp={this.handleItemDragEnd}\n        style={this.getStyle(this.state.dragPosition || this.props.position)}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default Draggable;\n","import React from \"react\";\nimport Types from \"prop-types\";\nimport classnames from \"classnames\";\n\nconst Undraggable = ({ children, className, ...rest }) => (\n  <div className={classnames(\"undraggable\", className)} {...rest}>\n    {children}\n  </div>\n);\n\nUndraggable.propTypes = {\n  children: Types.node.isRequired,\n  className: Types.string,\n};\n\nUndraggable.defaultProps = {\n  className: \"\",\n};\n\nexport default Undraggable;\n","import React, { useState } from \"react\";\nimport Types from \"prop-types\";\nimport Item from \"../Item\";\nimport { ItemComponent, NewItemForm } from \"../Item\";\nimport Sortable from \"react-sortablejs\";\nimport classnames from \"classnames\";\nimport { Undraggable } from \"../Draggable\";\nimport { getCopiedText, copyToClipboard } from \"./utils\";\n\nconst GroupComponent = ({\n  position,\n  title,\n  items,\n  timeStamp,\n  onChange,\n  onRemove,\n}) => {\n  const shouldShowItemFormByDefault = !items.length;\n  const [showNewItemForm, setShowNewItemForm] = useState(\n    shouldShowItemFormByDefault\n  );\n\n  const [deleted, setDeleted] = useState(false);\n\n  function handleGroupDelete() {\n    setDeleted(true);\n\n    setTimeout(() => {\n      onRemove();\n    }, 200);\n  }\n\n  function toggleNewItemForm(e) {\n    setShowNewItemForm(!showNewItemForm);\n  }\n\n  function handleItemCreate(item) {\n    const editedGroup = cloneItem({ items: [...items, item] });\n    onChange(editedGroup);\n  }\n\n  function handleItemRemove(item) {\n    const filteredItems = items.filter((i) => i.timeStamp !== item.timeStamp);\n\n    const editedGroup = cloneItem({ items: filteredItems });\n    onChange(editedGroup);\n    setShowNewItemForm(false);\n  }\n\n  function handleItemOrderChange(order) {\n    const sortedItems = order.map((timeStamp) =>\n      items.find((item) => item.timeStamp === parseInt(timeStamp))\n    );\n    const editedGroup = cloneItem({ items: sortedItems });\n    onChange(editedGroup);\n  }\n\n  function handleCopy() {\n    copyToClipboard(getCopiedText({ title, items }));\n  }\n\n  function mapItem(item) {\n    return (\n      <ItemComponent\n        key={item.timeStamp}\n        data-id={item.timeStamp}\n        title={item.title}\n        onClick={() => handleItemRemove(item)}\n      />\n    );\n  }\n\n  function cloneItem(params = {}) {\n    return new Item({\n      position,\n      title,\n      items,\n      timeStamp,\n      ...params,\n    });\n  }\n\n  function getStyle() {\n    return {\n      transform: deleted ? \"scale(0.7)\" : \"\",\n    };\n  }\n\n  return (\n    <div\n      className={classnames(\"item group\", {\n        \"item--collapse\": deleted,\n      })}\n      style={getStyle()}\n    >\n      {title && <span className=\"item-content\">{title}</span>}\n      <Undraggable className=\"item-add item-button\" onClick={toggleNewItemForm}>\n        +\n      </Undraggable>\n\n      <Undraggable\n        className=\"item-remove item-button\"\n        onClick={handleGroupDelete}\n      >\n        &times;\n      </Undraggable>\n\n      {(items.length || showNewItemForm) && (\n        <div className=\"group-items\">\n          <Undraggable>\n            <Sortable tag=\"ul\" onChange={handleItemOrderChange}>\n              {items.map(mapItem)}\n            </Sortable>\n\n            {showNewItemForm && (\n              <NewItemForm\n                isGrouped\n                onCreate={handleItemCreate}\n                onClose={toggleNewItemForm}\n              />\n            )}\n          </Undraggable>\n        </div>\n      )}\n      {!!items.length && (\n        <Undraggable onClick={handleCopy} className=\"item-copy\">\n          <button>copy</button>\n        </Undraggable>\n      )}\n    </div>\n  );\n};\n\nGroupComponent.propTypes = {\n  position: Types.shape({ x: Types.number, y: Types.number }).isRequired,\n  title: Types.string.isRequired,\n  items: Types.array.isRequired,\n  onChange: Types.func.isRequired,\n  onRemove: Types.func.isRequired,\n};\n\nexport default React.memo(GroupComponent);\n","export function getCopiedText({ title, items = [] }) {\n  const itemTitles = items.map(({ title }) => `- ${title}`);\n\n  return [title, ...itemTitles].join(\"\\n\");\n}\n\nexport function copyToClipboard(text) {\n  const textarea = document.createElement(\"textarea\");\n  textarea.style = {\n    position: \"absolute\",\n    top: \"-1000px\",\n  };\n  textarea.value = text;\n  document.body.appendChild(textarea);\n  textarea.select();\n  document.execCommand(\"copy\");\n  document.body.removeChild(textarea);\n}\n","import React, { useState, useEffect } from \"react\";\nimport classnames from \"classnames\";\nimport \"./App.scss\";\n\nimport { NewItemForm } from \"./Item\";\nimport Position from \"./Position\";\nimport { GroupComponent } from \"./Group\";\nimport { Draggable } from \"./Draggable\";\n\nfunction App({ db, userId }) {\n  const [history, setHistory] = useState([]);\n  const [items, setItems] = useState([]);\n  const [newItemPosition, setNewItemPosition] = useState(null);\n  const [isObfuscated, setIsObfuscated] = useState(false);\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", (e) => {\n      if (e.keyCode === 90 && (e.metaKey || e.ctrlKey)) {\n        e.preventDefault();\n        handleUndo();\n      }\n    });\n  });\n\n  useEffect(() => {\n    db.collection(\"items\")\n      .doc(userId)\n      .get()\n      .then((currentDoc) => {\n        if (currentDoc.exists) {\n          setItems(currentDoc.data().items);\n        }\n      });\n  }, [db, userId]);\n\n  function toggleAddItem(event) {\n    if (event.target !== event.currentTarget) return;\n\n    const position = new Position({ x: event.pageX, y: event.pageY });\n    setNewItemPosition(position);\n  }\n\n  function setItemsAndSave(newItems, saveHistory = true) {\n    if (saveHistory) {\n      setHistory([...history, items]);\n    }\n    setItems(newItems);\n    db.collection(\"items\")\n      .doc(userId)\n      .set({ items: JSON.parse(JSON.stringify(newItems)) });\n  }\n\n  function handleItemCreate(item) {\n    setItemsAndSave([...items, item]);\n    setNewItemPosition(null);\n  }\n\n  function handleItemChange(newValue, oldValue) {\n    const filteredItems = items.filter(\n      (i) => i.timeStamp !== oldValue.timeStamp\n    );\n\n    setItemsAndSave([...filteredItems, newValue]);\n    setNewItemPosition(null);\n  }\n\n  function handleItemRemove(item) {\n    const filteredItems = items.filter((i) => i.timeStamp !== item.timeStamp);\n    setItemsAndSave([...filteredItems]);\n  }\n\n  function handleUndo() {\n    if (!history.length) return;\n\n    setItemsAndSave(history[history.length - 1] || [], false);\n\n    const newHistory = [...history];\n    newHistory.pop();\n    setHistory(newHistory);\n  }\n\n  function handleObfuscate() {\n    setIsObfuscated(!isObfuscated);\n  }\n\n  function mapGroup(group) {\n    return (\n      <Draggable\n        position={group.position}\n        onDragEnd={(newPos) =>\n          handleItemChange({ ...group, position: newPos }, group)\n        }\n        key={group.timeStamp}\n      >\n        <GroupComponent\n          {...group}\n          onRemove={() => handleItemRemove(group)}\n          onChange={(newValue) => handleItemChange(newValue, group)}\n        />\n      </Draggable>\n    );\n  }\n\n  const groupElements = items.map((group) => {\n    return mapGroup(group);\n  });\n\n  const env = process.env.NODE_ENV;\n\n  return (\n    <div className=\"app\">\n      <div\n        className={classnames(\"board\", { obfuscated: isObfuscated }, env)}\n        onClick={toggleAddItem}\n      >\n        <ul>{groupElements}</ul>\n        {newItemPosition && (\n          <NewItemForm\n            onCreate={handleItemCreate}\n            position={newItemPosition}\n            onClose={() => setNewItemPosition(null)}\n          />\n        )}\n        <button\n          className={classnames(\"undo action\", { visible: history.length })}\n          onClick={handleUndo}\n        >\n          <span role=\"img\" aria-label=\"Undo\">\n            🤭\n          </span>\n        </button>\n\n        <button\n          className={classnames(\"obfuscate action \", { visible: items.length })}\n          onClick={handleObfuscate}\n        >\n          <span role=\"img\" aria-label=\"Obfuscate\">\n            {isObfuscated ? \"🐵\" : \"🙈\"}\n          </span>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nvar firebase = require(\"firebase\");\nrequire(\"firebase/firestore\");\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyC5Er4oZT-e4woRNxf9ZG59c4-MnP9ussQ\",\n  authDomain: \"dragly-359ad.firebaseapp.com\",\n  projectId: \"dragly-359ad\",\n  storageBucket: \"\",\n  messagingSenderId: \"747702472609\",\n  appId: \"1:747702472609:web:3f48f2bbe7117d8c87c5e0\",\n};\nfirebase.initializeApp(firebaseConfig);\nconst db = firebase.firestore();\n\nasync function init(user) {\n  if (!user) {\n    // Start a sign in process for an unauthenticated user.\n    const provider = new firebase.auth.GoogleAuthProvider();\n    await firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\n    await firebase.auth().signInWithPopup(provider);\n  }\n  if (user) {\n    ReactDOM.render(\n      <App db={db} userId={user.uid} />,\n      document.getElementById(\"root\")\n    );\n  }\n}\n\nfirebase.auth().onAuthStateChanged((user) => {\n  init(user);\n});\n"],"sourceRoot":""}