{"version":3,"sources":["Item/utils.ts","Item/ItemComponent.tsx","Item/Item.ts","Item/NewItemForm.tsx","Position/utils.ts","Position/Position.ts","Draggable/Draggable.tsx","Draggable/Undraggable.tsx","Group/GroupComponent.tsx","Group/utils.ts","App.tsx","utils/utils.ts","index.tsx"],"names":["isLink","str","isUrl","getStyleObject","position","left","x","top","y","ItemComponent","title","onClick","otherProps","useState","deleted","setDeleted","setTimeout","className","classnames","href","rel","target","e","stopPropagation","replace","Item","timeStamp","Date","now","items","id","this","NewItemFrom","isGrouped","onCreate","onClose","newItemTitle","setNewItemTitle","style","onSubmit","event","preventDefault","length","item","group","type","autoFocus","value","onChange","onKeyDown","keyCode","getOffset","el","rect","getBoundingClientRect","window","scrollX","scrollY","Position","Draggable","ref","createRef","state","dragPosition","undefined","dragStartOffset","isValidDragTarget","closest","handleItemDragStart","pointerPosition","pageX","pageY","elementPosition","currentTarget","document","addEventListener","handleItemDrag","newPosition","setState","handleItemDragEnd","removeEventListener","props","onDragEnd","p","onMouseDown","onMouseUp","getStyle","children","Component","Undraggable","rest","GroupComponent","onRemove","shouldShowItemFormByDefault","showNewItemForm","setShowNewItemForm","toggleNewItemForm","cloneItem","params","transform","list","tag","setList","reorderedItems","editedGroup","map","filter","i","handleItemRemove","NewItemForm","text","textarea","createElement","body","appendChild","select","execCommand","removeChild","copyToClipboard","itemTitles","join","getCopiedText","React","memo","env","process","collection","field","App","db","doc","userId","history","setHistory","data","setData","newItemPosition","setNewItemPosition","isObfuscated","setIsObfuscated","loading","setLoading","error","setError","setItems","newItems","currentData","setItemsAndSave","a","handleItemChange","newValue","oldValue","filteredItems","handleUndo","newHistory","pop","mapGroup","newPos","useEffect","metaKey","ctrlKey","get","then","currentDoc","exists","catch","set","obj","JSON","parse","stringify","persistRemoteData","groupElements","obfuscated","visible","role","aria-label","name","message","stack","require","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","user","provider","auth","GoogleAuthProvider","setPersistence","Auth","Persistence","LOCAL","signInWithPopup","ReactDOM","render","uid","getElementById","onAuthStateChanged","init"],"mappings":"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","file":"static/js/main.7197db70.chunk.js","sourcesContent":["import isUrl from \"is-url\";\nimport Position from \"../Position\";\n\nexport function isLink(str: string) {\n  return isUrl(str);\n}\n\nexport function getStyleObject(position?: Position) {\n  if (!position) return {};\n\n  return { left: position.x, top: position.y };\n}\n","import React, { useState } from \"react\";\nimport { isLink } from \"./utils\";\nimport classnames from \"classnames\";\n\ninterface Props {\n  title: string;\n  onClick: () => void;\n}\n\nconst ItemComponent: React.FC<Props> = ({ title, onClick, ...otherProps }) => {\n  const [deleted, setDeleted] = useState(false);\n\n  function handleClick() {\n    setDeleted(true);\n\n    setTimeout(() => {\n      onClick();\n    }, 200);\n  }\n\n  function parseTitle() {\n    let urlSliceRegex = /(https?:\\/\\/)?(www\\.)?/;\n    if (isLink(title)) {\n      return title.replace(urlSliceRegex, \"\");\n    }\n    return title;\n  }\n\n  return (\n    <li\n      {...otherProps}\n      onClick={handleClick}\n      className={classnames(\"item \", {\n        \"item--collapse\": deleted,\n      })}\n    >\n      <span className=\"item-content item-content-block\" title={title}>\n        {isLink(title) ? (\n          <a\n            href={title}\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n            onClick={(e) => {\n              e.stopPropagation();\n            }}\n          >\n            {parseTitle()}\n          </a>\n        ) : (\n          title\n        )}\n      </span>\n    </li>\n  );\n};\n\nexport default ItemComponent;\n","import Position from \"../Position\";\n\ninterface ConstructorProps {\n  title: string;\n  position?: Position;\n  timeStamp?: number;\n  items?: Item[]\n}\n\nexport default class Item {\n  id: number;\n  title: string;\n  position?: Position;\n  timeStamp: number;\n  items: Item[]\n\n  constructor({\n    title = \"\",\n    position,\n    timeStamp = Date.now(),\n    items = [],\n  }: ConstructorProps) {\n    this.id = timeStamp;\n    this.title = title;\n    this.position = position;\n    this.timeStamp = timeStamp;\n    this.items = items;\n  }\n}\n","import React, { ChangeEvent, FormEvent, KeyboardEvent, useState } from \"react\";\nimport Item from \"./Item\";\nimport { getStyleObject } from \"./utils\";\nimport classnames from \"classnames\";\nimport Position from \"../Position\";\n\ninterface Props {\n  isGrouped?: boolean;\n  position?: Position;\n  onCreate: (item: Item) => void;\n  onClose: () => void;\n}\n\nconst NewItemFrom: React.FC<Props> = ({ isGrouped = false, position, onCreate, onClose }) => {\n  const [newItemTitle, setNewItemTitle] = useState(\"\");\n\n  function handleCreateItem(event: FormEvent) {\n    event.preventDefault();\n\n    if (!newItemTitle.length) return;\n\n    const item = new Item({ position, title: newItemTitle });\n    onCreate(item);\n    setNewItemTitle(\"\");\n  }\n\n  function handleInputKeyDown(event: KeyboardEvent<HTMLInputElement>) {\n    switch (event.keyCode) {\n      case 27: // esc\n        return onClose();\n      case 8: // backspace\n        if (newItemTitle.length) return;\n        return onClose();\n      default:\n        return;\n    }\n  }\n\n  function handleTitleChange({ target: { value } }: ChangeEvent<HTMLInputElement>) {\n    setNewItemTitle(value);\n  }\n\n  function handleCreateGroup() {\n    const group = new Item({\n      position: position,\n      title: newItemTitle,\n      items: [],\n    });\n    onCreate(group);\n  }\n\n  return (\n    <form\n      className={classnames(\"new-item item\", { \"item--absolute\": position,'group': !isGrouped  })}\n      style={getStyleObject(position)}\n      onSubmit={isGrouped ? handleCreateItem : handleCreateGroup}\n    >\n      <input\n        type=\"text\"\n        className=\"item-content\"\n        autoFocus={true}\n        value={newItemTitle}\n        onChange={handleTitleChange}\n        onKeyDown={handleInputKeyDown}\n      />\n    </form>\n  );\n};\n\nexport default NewItemFrom;\n","export function getOffset(el: Element) {\n  const rect = el.getBoundingClientRect();\n  return {\n    x: rect.left + window.scrollX,\n    y: rect.top + window.scrollY,\n  };\n}\n","export default class Position {\n  x: number;\n  y: number;\n\n  constructor({ x = 0, y = 0 } = {}) {\n    this.x = x;\n    this.y = y;\n  }\n}\n","import { Component, createRef, MouseEventHandler } from \"react\";\nimport Position, { getOffset } from \"../Position\";\n\ninterface Props {\n  onDragEnd: (pos: Position) => void;\n  position?: Position;\n}\n\nclass Draggable extends Component<Props> {\n  ref = createRef<HTMLDivElement>();\n\n  state: {\n    dragPosition?: Position\n  } = {\n    dragPosition: undefined\n  };\n\n  dragStartOffset = {\n    x: 0,\n    y: 0\n  }\n\n  isValidDragTarget = (target: any) => {\n    const isChildOfGroupItems = !!target.closest(\".undraggable\");\n    return !isChildOfGroupItems;\n  };\n\n  handleItemDragStart: MouseEventHandler = (event) => {\n    if (!this.isValidDragTarget(event.target)) return;\n\n    const pointerPosition = { x: event.pageX, y: event.pageY };\n    const elementPosition = getOffset(event.currentTarget);\n    this.dragStartOffset = {\n      x: pointerPosition.x - elementPosition.x,\n      y: pointerPosition.y - elementPosition.y,\n    };\n\n    document.addEventListener(\"mousemove\", this.handleItemDrag);\n  };\n\n  handleItemDrag = (event: MouseEvent) => {\n    const newPosition = new Position({\n      x: event.pageX - this.dragStartOffset.x,\n      y: event.pageY - this.dragStartOffset.y,\n    });\n\n    this.setState({\n      dragPosition: newPosition,\n    });\n  };\n\n  handleItemDragEnd = () => {\n    document.removeEventListener(\"mousemove\", this.handleItemDrag);\n\n    if (this.state.dragPosition) {\n      this.props.onDragEnd({ ...this.state.dragPosition });\n      this.setState({ dragPosition: null });\n    }\n  };\n\n  getStyle(p?: Position) {\n    return {\n      left: p?.x,\n      top: p?.y,\n    };\n  }\n\n  render() {\n    return (\n      <div\n        className=\"draggable item--absolute\"\n        ref={this.ref}\n        onMouseDown={this.handleItemDragStart}\n        onMouseUp={this.handleItemDragEnd}\n        style={this.getStyle(this.state.dragPosition || this.props.position)}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default Draggable;\n","import React, { MouseEvent } from \"react\";\nimport classnames from \"classnames\";\n\ninterface Props {\n  className?: string;\n  onClick?:(e: MouseEvent<HTMLDivElement>) => void;\n}\n\nconst Undraggable: React.FC<Props> = ({ children, className = \"\", ...rest }) => (\n  <div className={classnames(\"undraggable\", className)} {...rest}>\n    {children}\n  </div>\n);\n\nexport default Undraggable;\n","import React, { useState } from \"react\";\nimport Item from \"../Item\";\nimport { ItemComponent, NewItemForm } from \"../Item\";\nimport { ReactSortable as Sortable } from \"react-sortablejs\";\nimport classnames from \"classnames\";\nimport { Undraggable } from \"../Draggable\";\nimport { getCopiedText, copyToClipboard } from \"./utils\";\nimport Position from \"../Position\";\n\ninterface Props {\n  position?: Position;\n  title: string;\n  items: Item[];\n  timeStamp?: number;\n  onChange: (item: Item) => void;\n  onRemove: () => void;\n}\n\nconst GroupComponent: React.FC<Props> = ({\n  position,\n  title,\n  items,\n  timeStamp,\n  onChange,\n  onRemove,\n}) => {\n  const shouldShowItemFormByDefault = !items.length;\n  const [showNewItemForm, setShowNewItemForm] = useState(\n    shouldShowItemFormByDefault\n  );\n\n  const [deleted, setDeleted] = useState(false);\n\n  function handleGroupDelete() {\n    setDeleted(true);\n\n    setTimeout(() => {\n      onRemove();\n    }, 200);\n  }\n\n  function toggleNewItemForm() {\n    setShowNewItemForm(!showNewItemForm);\n  }\n\n  function handleItemCreate(item: Item) {\n    const editedGroup = cloneItem({ items: [...items, item] });\n    onChange(editedGroup);\n  }\n\n  function handleItemRemove(item: Item) {\n    const filteredItems = items.filter((i) => i.timeStamp !== item.timeStamp);\n\n    const editedGroup = cloneItem({ items: filteredItems });\n    onChange(editedGroup);\n    setShowNewItemForm(false);\n  }\n\n  function handleItemOrderChange(reorderedItems: Item[]) {\n    const editedGroup = cloneItem({ items: reorderedItems });\n    onChange(editedGroup);\n  }\n\n  function handleCopy() {\n    copyToClipboard(getCopiedText({ title, items }));\n  }\n\n  function mapItem(item: Item) {\n    return (\n      <ItemComponent\n        key={item.timeStamp}\n        title={item.title}\n        onClick={() => handleItemRemove(item)}\n      />\n    );\n  }\n\n  function cloneItem(params = {}) {\n    return new Item({\n      position,\n      title,\n      items,\n      timeStamp,\n      ...params,\n    });\n  }\n\n  function getStyle() {\n    return {\n      transform: deleted ? \"scale(0.7)\" : \"\",\n    };\n  }\n\n  return (\n    <div\n      className={classnames(\"item group\", {\n        \"item--collapse\": deleted,\n      })}\n      style={getStyle()}\n    >\n      <div className=\"group-header\">\n        <div className=\"group-header-left\">\n          {title && <span className=\"item-content\">{title}</span>}\n          <Undraggable className=\"item-add item-button\" onClick={toggleNewItemForm}>\n            +\n          </Undraggable>\n        </div>\n\n        <Undraggable\n          className=\"item-remove item-button\"\n          onClick={handleGroupDelete}\n        >\n          &times;\n        </Undraggable>\n      </div>\n\n      {(items.length || showNewItemForm) && (\n        <div className=\"group-items\">\n          <Undraggable>\n            <Sortable list={items} tag=\"ul\" setList={handleItemOrderChange}>\n              {items.map(mapItem)}\n            </Sortable>\n\n            {showNewItemForm && (\n              <NewItemForm\n                isGrouped\n                onCreate={handleItemCreate}\n                onClose={toggleNewItemForm}\n              />\n            )}\n          </Undraggable>\n        </div>\n      )}\n      {!!items.length && (\n        <Undraggable onClick={handleCopy} className=\"item-copy\">\n          <button>copy</button>\n        </Undraggable>\n      )}\n    </div>\n  );\n};\n\n\nexport default React.memo(GroupComponent);\n","import Item from \"../Item\";\n\nexport function getCopiedText({ title, items = [] }: {title: string, items?: Item[] }) {\n  const itemTitles = items.map(({ title }) => `- ${title}`);\n\n  return [title, ...itemTitles].join(\"\\n\");\n}\n\nexport function copyToClipboard(text: string) {\n  const textarea = document.createElement(\"textarea\");\n  // @ts-ignore\n  textarea.style = {\n    position: \"absolute\",\n    top: \"-1000px\",\n  };\n  textarea.value = text;\n  document.body.appendChild(textarea);\n  textarea.select();\n  document.execCommand(\"copy\");\n  document.body.removeChild(textarea);\n}\n","import React, { useState, useEffect, MouseEvent } from \"react\";\nimport classnames from \"classnames\";\nimport \"./App.scss\";\n\nimport Item, { NewItemForm } from \"./Item\";\nimport Position from \"./Position\";\nimport { GroupComponent } from \"./Group\";\nimport { Draggable } from \"./Draggable\";\nimport firebase from \"firebase\";\nimport { toPlainObject } from \"./utils\";\n\ninterface Props {\n  db: firebase.firestore.Firestore;\n  userId: string;\n}\n\ntype Data = {\n  items?: Item[];\n  devItems?: Item[];\n};\n\nconst env = process.env.NODE_ENV;\nconst isProduction = env === \"production\";\nconst PERSIST_IN_DEV = true;\nconst PERSIST = isProduction || PERSIST_IN_DEV;\nconst collection = \"items\";\nconst field = isProduction ? \"items\" : \"devItems\";\n\nconst App: React.FC<Props> = ({ db, userId }) => {\n  const doc = userId;\n\n  const [history, setHistory] = useState<Item[][]>([]);\n  const [data, setData] = useState<Data>();\n  const [newItemPosition, setNewItemPosition] = useState<Position>();\n  const [isObfuscated, setIsObfuscated] = useState<boolean>(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<Error>();\n\n  const items = data?.[field] || [];\n\n  const setItems = (newItems: Item[]) => {\n    setData((currentData) => ({\n      ...currentData,\n      [field]: newItems,\n    }));\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", (e) => {\n      if (e.keyCode === 90 && (e.metaKey || e.ctrlKey)) {\n        e.preventDefault();\n        handleUndo();\n      }\n    });\n  });\n\n  useEffect(() => {\n    setLoading(true);\n    setError(undefined);\n    db.collection(collection)\n      .doc(doc)\n      .get()\n      .then((currentDoc: firebase.firestore.DocumentSnapshot<Data>) => {\n        if (currentDoc.exists) {\n          setData(currentDoc.data() || {});\n        }\n        setLoading(false);\n      })\n      .catch((e) => {\n        setError(e);\n      });\n  }, [db, doc]);\n\n  useEffect(() => {\n    const persistRemoteData = async () => {\n      if (PERSIST && data) {\n        setLoading(true);\n        setError(undefined);\n        try {\n          await db.collection(collection).doc(doc).set(toPlainObject(data));\n        } catch (e) {\n          setError(e as Error);\n        }\n        setLoading(false);\n      }\n    };\n    persistRemoteData();\n  }, [data, db, doc]);\n\n  function toggleAddItem(event: MouseEvent<HTMLDivElement>) {\n    if (event.target !== event.currentTarget) return;\n\n    const position = new Position({ x: event.pageX, y: event.pageY });\n    setNewItemPosition(position);\n  }\n\n  async function setItemsAndSave(newItems: Item[], saveHistory = true) {\n    if (saveHistory) {\n      setHistory([...history, items]);\n    }\n    setItems(newItems);\n  }\n\n  function handleItemCreate(item: Item) {\n    setItemsAndSave([...items, item]);\n    setNewItemPosition(undefined);\n  }\n\n  function handleItemChange(newValue: Item, oldValue: Item) {\n    const filteredItems = items.filter(\n      (i) => i.timeStamp !== oldValue.timeStamp\n    );\n\n    setItemsAndSave([...filteredItems, newValue]);\n    setNewItemPosition(undefined);\n  }\n\n  function handleItemRemove(item: Item) {\n    const filteredItems = items.filter((i) => i.timeStamp !== item.timeStamp);\n    setItemsAndSave([...filteredItems]);\n  }\n\n  function handleUndo() {\n    if (!history.length) return;\n\n    setItemsAndSave(history[history.length - 1] || [], false);\n\n    const newHistory = [...history];\n    newHistory.pop();\n    setHistory(newHistory);\n  }\n\n  function handleObfuscate() {\n    setIsObfuscated(!isObfuscated);\n  }\n\n  function mapGroup(group: Item) {\n    return (\n      <Draggable\n        position={group.position}\n        onDragEnd={(newPos) =>\n          handleItemChange({ ...group, position: newPos }, group)\n        }\n        key={group.timeStamp}\n      >\n        <GroupComponent\n          {...group}\n          onRemove={() => handleItemRemove(group)}\n          onChange={(newValue) => handleItemChange(newValue, group)}\n        />\n      </Draggable>\n    );\n  }\n\n  const groupElements = items.map((group) => {\n    return mapGroup(group);\n  });\n\n  return (\n    <div className=\"app\">\n      <div\n        className={classnames(\"board\", { obfuscated: isObfuscated }, env)}\n        onClick={toggleAddItem}\n      >\n        <ul>{groupElements}</ul>\n        {newItemPosition && (\n          <NewItemForm\n            onCreate={handleItemCreate}\n            position={newItemPosition}\n            onClose={() => setNewItemPosition(undefined)}\n          />\n        )}\n        <button\n          className={classnames(\"undo action\", { visible: history.length })}\n          onClick={handleUndo}\n        >\n          <span role=\"img\" aria-label=\"Undo\">\n            ü§≠\n          </span>\n        </button>\n        <div className={classnames(\"loading action\", { visible: loading })}>\n          <span role=\"img\" aria-label=\"Loading\">\n            ‚ôªÔ∏è\n          </span>\n        </div>\n        <div className={classnames(\"error action\", { visible: !!error })}>\n          <span role=\"img\" aria-label=\"Error\">\n            ‚õî\n          </span>\n        </div>\n\n        <button\n          className={classnames(\"obfuscate action \", { visible: items.length })}\n          onClick={handleObfuscate}\n        >\n          <span role=\"img\" aria-label=\"Obfuscate\">\n            {isObfuscated ? \"üêµ\" : \"üôà\"}\n          </span>\n        </button>\n        {!!error && (\n          <div className=\"error-modal\">\n            <h2>{error.name}</h2>\n            <p>{error.message}</p>\n            <br />\n            {error.stack && <pre>{error.stack}</pre>}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","export const toPlainObject = (obj: Record<string, unknown>) => JSON.parse(JSON.stringify(obj));","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport firebase from \"firebase\";\n\nrequire(\"firebase/firestore\");\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyC5Er4oZT-e4woRNxf9ZG59c4-MnP9ussQ\",\n  authDomain: \"dragly-359ad.firebaseapp.com\",\n  projectId: \"dragly-359ad\",\n  storageBucket: \"\",\n  messagingSenderId: \"747702472609\",\n  appId: \"1:747702472609:web:3f48f2bbe7117d8c87c5e0\",\n};\nfirebase.initializeApp(firebaseConfig);\nconst db = firebase.firestore();\n\nasync function init(user: firebase.User | null) {\n  if (!user) {\n    // Start a sign in process for an unauthenticated user.\n    const provider = new firebase.auth.GoogleAuthProvider();\n    await firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\n    await firebase.auth().signInWithPopup(provider);\n  }\n  if (user) {\n    ReactDOM.render(\n      <App db={db} userId={user.uid} />,\n      document.getElementById(\"root\")\n    );\n  }\n}\n\nfirebase.auth().onAuthStateChanged((user) => {\n  init(user);\n});\n"],"sourceRoot":""}