(this["webpackJsonpto-drag-list"]=this["webpackJsonpto-drag-list"]||[]).push([[0],{10:function(t,e,n){t.exports=n(22)},15:function(t,e,n){},16:function(t,e,n){},22:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=n(6),r=n.n(i),c=(n(15),n(2)),l=n(1),u=(n(16),n(9));function s(t){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|localhost|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)}function m(t){return t?{left:t.x,top:t.y}:{}}var f=n(3),p=n.n(f),g=function(t){var e=t.title,n=t.onClick,i=Object(u.a)(t,["title","onClick"]),r=Object(a.useState)(!1),c=Object(l.a)(r,2),m=c[0],f=c[1];function g(){if(s(e)){var t=e.replace(/(https?:\/\/)?(www\.)?/,"");return t.length>43?t.slice(0,40)+"...":t}return e}return o.a.createElement("li",Object.assign({},i,{onClick:function(){f(!0),setTimeout((function(){n()}),200)},className:p()("item ",{"item--collapse":m})}),o.a.createElement("span",{className:"item-content"},s(e)?o.a.createElement("a",{href:e,rel:"noreferrer noopener",target:"_blank",onClick:function(t){t.stopPropagation()}},g()):g()))};g.defaultProps={onClick:function(){}};var v=g,d=n(4),b=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.title,a=void 0===n?"":n,o=e.position,i=void 0===o?null:o,r=e.timeStamp,c=void 0===r?Date.now():r,l=e.items;Object(d.a)(this,t),this.title=a,this.position=i,this.timeStamp=c,this.items=l},O=function(t){var e=t.isGrouped,n=void 0!==e&&e,i=t.position,r=t.onCreate,c=t.onClose,u=Object(a.useState)(""),s=Object(l.a)(u,2),f=s[0],p=s[1];return o.a.createElement("form",{className:"new-item item"+(i?" item--absolute":""),style:m(i),onSubmit:n?function(t){if(t.preventDefault(),f.length){var e=new b({position:i,title:f});r(e),p("")}}:function(){var t=new b({position:i,title:f,items:[]});r(t)}},o.a.createElement("input",{type:"text",className:"item-content",autoFocus:!0,value:f,onChange:function(t){var e=t.target.value;p(e)},onKeyDown:function(t){switch(t.keyCode){case 27:return c();case 8:if(f.length)return;return c();default:return}}}))};var h=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.x,a=void 0===n?0:n,o=e.y,i=void 0===o?0:o;Object(d.a)(this,t),this.x=a,this.y=i},y=n(7),j=n(8),w=n.n(j);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var E=function(t){var e,n=t.position,i=t.title,r=t.items,u=t.timeStamp,s=t.onChange,m=t.onRemove,f=!r.length,g=Object(a.useState)(f),d=Object(l.a)(g,2),j=d[0],E=d[1],C=Object(a.useState)(!1),k=Object(l.a)(C,2),N=k[0],x=k[1];function D(){E(!j)}function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new b(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(n,!0).forEach((function(e){Object(y.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({position:n,title:i,items:r,timeStamp:u},t))}return o.a.createElement("div",{draggable:!0,onDragStart:function(t){var n=t.pageX,a=t.pageY,o=function(t){var e=t.getBoundingClientRect();return{x:e.left+window.scrollX,y:e.top+window.scrollY}}(t.target);e={x:n-o.x,y:a-o.y}},onDragEnd:function(t){if(t.target===t.currentTarget){var n=P({position:new h({x:t.pageX-e.x,y:t.pageY-e.y})});s(n)}},className:p()("item group",{"item--absolute":n,"item--collapse":N}),style:{left:n.x,top:n.y}},i&&o.a.createElement("span",{className:"item-content"},i),o.a.createElement("span",{className:"item-add item-button",onClick:D},"+"),o.a.createElement("span",{className:"item-remove item-button",onClick:function(){x(!0),setTimeout((function(){m()}),200)}},"\xd7"),(r.length||j)&&o.a.createElement("div",{className:"group-items"},o.a.createElement(w.a,{tag:"ul",onChange:function(t){var e=P({items:t.map((function(t){return r.find((function(e){return e.timeStamp===parseInt(t)}))}))});s(e)}},r.map((function(t){return o.a.createElement(v,{title:t.title,"data-id":t.timeStamp,key:t.timeStamp,onClick:function(){return function(t){var e=P({items:r.filter((function(e){return e.timeStamp!==t.timeStamp}))});s(e),E(!1)}(t)}})}))),j&&o.a.createElement(O,{isGrouped:!0,onCreate:function(t){var e=P({items:[].concat(Object(c.a)(r),[t])});s(e)},onClose:D})))},C=JSON.parse(localStorage.getItem("dragly-items")||"[]");var k=function(){console.log("hello");var t=Object(a.useState)([]),e=Object(l.a)(t,2),n=e[0],i=e[1],r=Object(a.useState)(C),u=Object(l.a)(r,2),s=u[0],m=u[1],f=Object(a.useState)(null),p=Object(l.a)(f,2),g=p[0],d=p[1];function b(t){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&i([].concat(Object(c.a)(n),[s])),m(t),localStorage.setItem("dragly-items",JSON.stringify(t))}function y(t,e){var n=s.filter((function(t){return t.timeStamp!==e.timeStamp}));b([].concat(Object(c.a)(n),[t])),d(null)}function j(t){var e=s.filter((function(e){return e.timeStamp!==t.timeStamp}));b(Object(c.a)(e))}function w(){if(n.length){b(n[n.length-1]||[],!1);var t=Object(c.a)(n);t.pop(),i(t)}}Object(a.useEffect)((function(){document.addEventListener("keydown",(function(t){90===t.keyCode&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),w())}))}));var S=s.map((function(t){return t.items?(e=t,o.a.createElement(E,Object.assign({},e,{onRemove:function(){return j(e)},onChange:function(t){return y(t,e)},key:e.timeStamp}))):function(t){return o.a.createElement(v,Object.assign({},t,{onRemove:function(){return j(t)},onChange:function(e){return y(e,t)},key:t.timeStamp}))}(t);var e})),k=o.a.createElement(O,{onCreate:function(t){b([].concat(Object(c.a)(s),[t])),d(null)},position:g,onClose:function(){return d(null)}});return o.a.createElement("div",{className:"app"},o.a.createElement("div",{className:"board",onClick:function(t){if(t.target===t.currentTarget){var e=new h({x:t.pageX,y:t.pageY});d(e)}}},o.a.createElement("ul",null,S),g&&k,o.a.createElement("button",{className:"undo "+(n.length?"visible":""),onClick:w},o.a.createElement("span",{role:"img","aria-label":"Undo"},"\ud83e\udd2d"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.3a871792.chunk.js.map