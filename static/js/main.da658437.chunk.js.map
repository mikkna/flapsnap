{"version":3,"sources":["Item/utils.js","Item/ItemComponent.js","Item/Item.js","Item/NewItemForm.js","Position/Position.js","Group/GroupComponent.js","Position/utils.js","App.js","serviceWorker.js","index.js"],"names":["isLink","str","RegExp","test","getStyleObject","position","left","x","top","y","ItemComponent","title","onClick","otherProps","useState","deleted","setDeleted","parseTitle","parsedTitle","replace","length","slice","setTimeout","className","classnames","href","rel","target","e","stopPropagation","defaultProps","Item","timeStamp","Date","now","items","this","NewItemFrom","isGrouped","onCreate","onClose","newItemTitle","setNewItemTitle","style","onSubmit","event","preventDefault","item","group","type","autoFocus","value","onChange","onKeyDown","keyCode","Position","GroupComponent","dragStartOffset","onRemove","shouldShowItemFormByDefault","showNewItemForm","setShowNewItemForm","toggleNewItemForm","cloneItem","params","draggable","onDragStart","pointerPosition","pageX","pageY","elementPosition","el","rect","getBoundingClientRect","window","scrollX","scrollY","getOffset","onDragEnd","currentTarget","editedGroup","tag","order","map","find","parseInt","data-id","key","filter","i","handleItemRemove","NewItemForm","itemsFromLocalStorage","JSON","parse","localStorage","getItem","App","history","setHistory","setItems","newItemPosition","setNewItemPosition","setItemsAndSave","newItems","setItem","stringify","handleItemChange","newValue","oldValue","filteredItems","handleUndo","newHistory","pop","useEffect","document","addEventListener","metaKey","ctrlKey","itemElements","mapItem","input","role","aria-label","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.da658437.chunk.js","sourcesContent":["export function isLink(str) {\n  const pattern = new RegExp(\n    \"^(https?:\\\\/\\\\/)?\" + // protocol\n    \"((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|localhost|\" + // domain name\n    \"((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))\" + // OR ip (v4) address\n    \"(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*\" + // port and path\n    \"(\\\\?[;&a-z\\\\d%_.~+=-]*)?\" + // query string\n      \"(\\\\#[-a-z\\\\d_]*)?$\",\n    \"i\"\n  ); // fragment locator\n  return !!pattern.test(str);\n}\n\nexport function getStyleObject(position) {\n  if (!position) return {};\n\n  return { left: position.x, top: position.y };\n}\n","import React, { useState } from \"react\";\nimport Types from \"prop-types\";\nimport { isLink } from \"./utils\";\nimport classnames from 'classnames';\n\nconst ItemComponent = ({ title, onClick, ...otherProps }) => {\n  const [deleted, setDeleted] = useState(false);\n\n  function handleClick() {\n    setDeleted(true);\n\n    setTimeout(() => {\n      onClick();\n    }, 200);\n  }\n\n  function parseTitle() {\n    let urlSliceRegex = /(https?:\\/\\/)?(www\\.)?/;\n    if (isLink(title)) {\n      let parsedTitle = title.replace(urlSliceRegex, \"\");\n      if (parsedTitle.length > 43) {\n        return parsedTitle.slice(0, 40) + \"...\";\n      }\n      return parsedTitle;\n    }\n    return title;\n  }\n\n  return (\n    <li\n      {...otherProps}\n      onClick={handleClick}\n      className={classnames('item ', {\n        'item--collapse': deleted\n      })}\n    >\n      <span className=\"item-content\">\n        {isLink(title) ? (\n          <a\n            href={title}\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n            onClick={e => {\n              e.stopPropagation();\n            }}\n          >\n            {parseTitle()}\n          </a>\n        ) : (\n            parseTitle()\n          )}\n      </span>\n    </li>\n  );\n};\n\nItemComponent.propTypes = {\n  title: Types.string.isRequired,\n  onClick: Types.func\n};\n\nItemComponent.defaultProps = {\n  onClick: () => { }\n};\n\nexport default ItemComponent;\n","export default class Item {\n  constructor({\n    title = \"\",\n    position = null,\n    timeStamp = Date.now(),\n    items\n  } = {}) {\n    this.title = title;\n    this.position = position;\n    this.timeStamp = timeStamp;\n    this.items = items;\n  }\n}\n","import React, { useState } from \"react\";\nimport Types from \"prop-types\";\nimport Item from \"./Item\";\nimport { getStyleObject } from \"./utils\";\n\nconst NewItemFrom = ({ isGrouped = false, position, onCreate, onClose }) => {\n  const [newItemTitle, setNewItemTitle] = useState(\"\");\n\n  function handleCreateItem(event) {\n    event.preventDefault();\n\n    if (!newItemTitle.length) return;\n\n    const item = new Item({ position, title: newItemTitle });\n    onCreate(item);\n    setNewItemTitle(\"\");\n  }\n\n  function handleInputKeyDown(event) {\n    switch (event.keyCode) {\n      case 27: // esc\n        return onClose();\n      case 8: // backspace\n        if (newItemTitle.length) return;\n        return onClose();\n      default:\n        return;\n    }\n  }\n\n  function handleTitleChange({ target: { value } }) {\n    setNewItemTitle(value);\n  }\n\n  function handleCreateGroup() {\n    const group = new Item({\n      position: position,\n      title: newItemTitle,\n      items: []\n    });\n    onCreate(group);\n  }\n\n  return (\n    <form\n      className={\"new-item item\" + (position ? \" item--absolute\" : \"\")}\n      style={getStyleObject(position)}\n      onSubmit={isGrouped ? handleCreateItem : handleCreateGroup}\n    >\n      <input\n        type=\"text\"\n        className=\"item-content\"\n        autoFocus={true}\n        value={newItemTitle}\n        onChange={handleTitleChange}\n        onKeyDown={handleInputKeyDown}\n      />\n    </form>\n  );\n};\n\nNewItemFrom.propTypes = {\n  isGrouped: Types.bool,\n  position: Types.shape({}),\n  onCreate: Types.func.isRequired,\n  onClose: Types.func.isRequired\n};\n\nexport default NewItemFrom;\n","export default class Position {\n  constructor({ x = 0, y = 0 } = {}) {\n    this.x = x;\n    this.y = y;\n  }\n}\n","import React, { useState } from \"react\";\nimport Types from \"prop-types\";\nimport Position, { getOffset } from \"../Position\";\nimport Item from \"../Item\";\nimport { ItemComponent, NewItemForm } from \"../Item\";\nimport Sortable from \"react-sortablejs\";\nimport classnames from 'classnames';\n\nconst GroupComponent = ({\n  position,\n  title,\n  items,\n  timeStamp,\n  onChange,\n  onRemove\n}) => {\n  const shouldShowItemFormByDefault = !items.length;\n  const [showNewItemForm, setShowNewItemForm] = useState(\n    shouldShowItemFormByDefault\n  );\n  const [deleted, setDeleted] = useState(false);\n\n  let dragStartOffset;\n\n  function handleItemDragStart(event) {\n    const pointerPosition = { x: event.pageX, y: event.pageY };\n    const elementPosition = getOffset(event.target);\n    dragStartOffset = {\n      x: pointerPosition.x - elementPosition.x,\n      y: pointerPosition.y - elementPosition.y\n    };\n  }\n  function handleItemDragEnd(event) {\n    if (event.target !== event.currentTarget) return;\n\n    const position = new Position({\n      x: event.pageX - dragStartOffset.x,\n      y: event.pageY - dragStartOffset.y\n    });\n    const editedGroup = cloneItem({ position });\n\n    onChange(editedGroup);\n  }\n\n  function handleGroupDelete() {\n    setDeleted(true);\n\n    setTimeout(() => {\n      onRemove();\n    }, 200);\n  }\n\n  function toggleNewItemForm() {\n    setShowNewItemForm(!showNewItemForm);\n  }\n\n  function handleItemCreate(item) {\n    const editedGroup = cloneItem({ items: [...items, item] });\n    onChange(editedGroup);\n  }\n\n  function handleItemRemove(item) {\n    const filteredItems = items.filter(i => i.timeStamp !== item.timeStamp);\n\n    const editedGroup = cloneItem({ items: filteredItems });\n    onChange(editedGroup);\n    setShowNewItemForm(false);\n  }\n\n  function handleItemOrderChange(order) {\n    const sortedItems = order.map(timeStamp =>\n      items.find(item => item.timeStamp === parseInt(timeStamp))\n    );\n    const editedGroup = cloneItem({ items: sortedItems });\n    onChange(editedGroup);\n  }\n\n  function mapItem(item) {\n    return (\n      <ItemComponent\n        title={item.title}\n        data-id={item.timeStamp}\n        key={item.timeStamp}\n        onClick={() => handleItemRemove(item)}\n      />\n    );\n  }\n\n  function cloneItem(params = {}) {\n    return new Item({\n      position,\n      title,\n      items,\n      timeStamp,\n      ...params\n    });\n  }\n\n  return (\n    <div\n      draggable={true}\n      onDragStart={handleItemDragStart}\n      onDragEnd={handleItemDragEnd}\n      className={classnames('item group', {\n        'item--absolute': position,\n        'item--collapse': deleted\n      })}\n      style={{ left: position.x, top: position.y }}\n    >\n      {title && <span className=\"item-content\">{title}</span>}\n      <span className=\"item-add item-button\" onClick={toggleNewItemForm}>\n        +\n      </span>\n      <span className=\"item-remove item-button\" onClick={handleGroupDelete}>\n        &times;\n      </span>\n\n      {(items.length || showNewItemForm) && (\n        <div className=\"group-items\">\n          <Sortable tag=\"ul\" onChange={handleItemOrderChange}>\n            {items.map(mapItem)}\n          </Sortable>\n\n          {showNewItemForm && (\n            <NewItemForm\n              isGrouped\n              onCreate={handleItemCreate}\n              onClose={toggleNewItemForm}\n            />\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nGroupComponent.propTypes = {\n  position: Types.shape({ x: Types.number, y: Types.number }).isRequired,\n  title: Types.string.isRequired,\n  items: Types.array.isRequired,\n  onChange: Types.func.isRequired,\n  onRemove: Types.func.isRequired\n};\n\nexport default GroupComponent;\n","export function getOffset(el) {\n  const rect = el.getBoundingClientRect();\n  return {\n    x: rect.left + window.scrollX,\n    y: rect.top + window.scrollY\n  };\n}\n","import React, { useState, useEffect } from \"react\";\nimport \"./App.scss\";\n\nimport { NewItemForm } from \"./Item\";\nimport Position from \"./Position\";\nimport { GroupComponent } from \"./Group\";\nimport { ItemComponent } from \"./Item\";\n\nconst itemsFromLocalStorage = JSON.parse(\n  localStorage.getItem(\"dragly-items\") || \"[]\"\n);\n\nfunction App() {\n  const [history, setHistory] = useState([]);\n  const [items, setItems] = useState(itemsFromLocalStorage);\n  const [newItemPosition, setNewItemPosition] = useState(null);\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", e => {\n      if (e.keyCode === 90 && (e.metaKey || e.ctrlKey)) {\n        e.preventDefault();\n        handleUndo();\n      }\n    });\n  });\n\n  function toggleAddItem(event) {\n    if (event.target !== event.currentTarget) return;\n\n    const position = new Position({ x: event.pageX, y: event.pageY });\n    setNewItemPosition(position);\n  }\n\n  function setItemsAndSave(newItems, saveHistory = true) {\n    if (saveHistory) {\n      setHistory([...history, items]);\n    }\n    setItems(newItems);\n    localStorage.setItem(\"dragly-items\", JSON.stringify(newItems));\n  }\n\n  function handleItemCreate(item) {\n    setItemsAndSave([...items, item]);\n    setNewItemPosition(null);\n  }\n\n  function handleItemChange(newValue, oldValue) {\n    const filteredItems = items.filter(i => i.timeStamp !== oldValue.timeStamp);\n    setItemsAndSave([...filteredItems, newValue]);\n    setNewItemPosition(null);\n  }\n\n  function handleItemRemove(item) {\n    const filteredItems = items.filter(i => i.timeStamp !== item.timeStamp);\n    setItemsAndSave([...filteredItems]);\n  }\n\n  function handleUndo() {\n    if (!history.length) return;\n\n    setItemsAndSave(history[history.length - 1] || [], false);\n\n    const newHistory = [...history];\n    newHistory.pop();\n    setHistory(newHistory);\n  }\n\n  const itemElements = items.map(item => {\n    if (item.items) {\n      return mapGroup(item);\n    }\n    return mapItem(item);\n  });\n\n  function mapItem(item) {\n    return (\n      <ItemComponent\n        {...item}\n        onRemove={() => handleItemRemove(item)}\n        onChange={newValue => handleItemChange(newValue, item)}\n        key={item.timeStamp}\n      />\n    );\n  }\n\n  function mapGroup(group) {\n    return (\n      <GroupComponent\n        {...group}\n        onRemove={() => handleItemRemove(group)}\n        onChange={newValue => handleItemChange(newValue, group)}\n        key={group.timeStamp}\n      />\n    );\n  }\n\n  const input = (\n    <NewItemForm\n      onCreate={handleItemCreate}\n      position={newItemPosition}\n      onClose={() => setNewItemPosition(null)}\n    />\n  );\n\n  return (\n    <div className=\"app\">\n      <div className=\"board\" onClick={toggleAddItem}>\n        <ul>{itemElements}</ul>\n        {newItemPosition && input}\n        <button\n          className={\"undo \" + (history.length ? \"visible\" : \"\")}\n          onClick={handleUndo}\n        >\n          <span role=\"img\" aria-label=\"Undo\">\n            🤭\n          </span>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}