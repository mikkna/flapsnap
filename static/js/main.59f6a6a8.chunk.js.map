{"version":3,"sources":["Item/utils.js","Item/ItemComponent.js","Item/Item.js","Item/NewItemForm.js","Position/Position.js","Group/GroupComponent.js","Position/utils.js","App.js","index.js"],"names":["isLink","str","RegExp","test","getStyleObject","position","left","x","top","y","ItemComponent","title","onClick","otherProps","useState","deleted","setDeleted","parseTitle","parsedTitle","replace","length","slice","setTimeout","className","classnames","href","rel","target","e","stopPropagation","defaultProps","Item","timeStamp","Date","now","items","this","NewItemFrom","isGrouped","onCreate","onClose","newItemTitle","setNewItemTitle","style","onSubmit","event","preventDefault","item","group","type","autoFocus","value","onChange","onKeyDown","keyCode","Position","GroupComponent","dragStartOffset","onRemove","shouldShowItemFormByDefault","showNewItemForm","setShowNewItemForm","toggleNewItemForm","cloneItem","params","draggable","onDragStart","pointerPosition","pageX","pageY","elementPosition","el","rect","getBoundingClientRect","window","scrollX","scrollY","getOffset","onDragEnd","currentTarget","editedGroup","transform","tag","order","map","find","parseInt","data-id","key","filter","i","handleItemRemove","NewItemForm","itemsFromLocalStorage","JSON","parse","localStorage","getItem","App","history","setHistory","setItems","newItemPosition","setNewItemPosition","isObfuscated","setIsObfuscated","setItemsAndSave","newItems","setItem","stringify","handleItemChange","newValue","oldValue","filteredItems","handleUndo","newHistory","pop","useEffect","document","addEventListener","metaKey","ctrlKey","itemElements","mapItem","obfuscated","visible","role","aria-label","ReactDOM","render","getElementById"],"mappings":"iSAAO,SAASA,EAAOC,GAUrB,QATgB,IAAIC,OAClB,kLAMA,KAEeC,KAAKF,GAGjB,SAASG,EAAeC,GAC7B,OAAKA,EAEE,CAAEC,KAAMD,EAASE,EAAGC,IAAKH,EAASI,GAFnB,GCTxB,IAAMC,EAAgB,SAAC,GAAuC,IAArCC,EAAoC,EAApCA,MAAOC,EAA6B,EAA7BA,QAAYC,EAAiB,qCAC7BC,oBAAS,GADoB,mBACpDC,EADoD,KAC3CC,EAD2C,KAW3D,SAASC,IAEP,GAAIjB,EAAOW,GAAQ,CACjB,IAAIO,EAAcP,EAAMQ,QAFN,yBAE6B,IAC/C,OAAID,EAAYE,OAAS,GAChBF,EAAYG,MAAM,EAAG,IAAM,MAE7BH,EAET,OAAOP,EAGT,OACE,wCACME,EADN,CAEED,QAvBJ,WACEI,GAAW,GAEXM,YAAW,WACTV,MACC,MAmBDW,UAAWC,IAAW,QAAS,CAC7B,iBAAkBT,MAGpB,0BAAMQ,UAAU,gBACbvB,EAAOW,GACN,uBACEc,KAAMd,EACNe,IAAI,sBACJC,OAAO,SACPf,QAAS,SAAAgB,GACPA,EAAEC,oBAGHZ,KAGDA,OAYZP,EAAcoB,aAAe,CAC3BlB,QAAS,cAGIF,Q,OCjEMqB,EACnB,aAKS,IAAD,yDAAJ,GAAI,IAJNpB,aAIM,MAJE,GAIF,MAHNN,gBAGM,MAHK,KAGL,MAFN2B,iBAEM,MAFMC,KAAKC,MAEX,EADNC,EACM,EADNA,MACM,oBACNC,KAAKzB,MAAQA,EACbyB,KAAK/B,SAAWA,EAChB+B,KAAKJ,UAAYA,EACjBI,KAAKD,MAAQA,GC2DFE,EA/DK,SAAC,GAAwD,IAAD,IAArDC,iBAAqD,SAAlCjC,EAAkC,EAAlCA,SAAUkC,EAAwB,EAAxBA,SAAUC,EAAc,EAAdA,QAAc,EAClC1B,mBAAS,IADyB,mBACnE2B,EADmE,KACrDC,EADqD,KAsC1E,OACE,0BACEnB,UAAWC,IAAW,gBAAiB,CAAE,iBAAkBnB,IAC3DsC,MAAOvC,EAAeC,GACtBuC,SAAUN,EAvCd,SAA0BO,GAGxB,GAFAA,EAAMC,iBAEDL,EAAarB,OAAlB,CAEA,IAAM2B,EAAO,IAAIhB,EAAK,CAAE1B,WAAUM,MAAO8B,IACzCF,EAASQ,GACTL,EAAgB,MAmBlB,WACE,IAAMM,EAAQ,IAAIjB,EAAK,CACrB1B,SAAUA,EACVM,MAAO8B,EACPN,MAAO,KAETI,EAASS,KASP,2BACEC,KAAK,OACL1B,UAAU,eACV2B,WAAW,EACXC,MAAOV,EACPW,SAxBN,YAAmD,IAAZD,EAAW,EAArBxB,OAAUwB,MACrCT,EAAgBS,IAwBZE,UArCN,SAA4BR,GAC1B,OAAQA,EAAMS,SACZ,KAAK,GACH,OAAOd,IACT,KAAK,EACH,GAAIC,EAAarB,OAAQ,OACzB,OAAOoB,IACT,QACE,a,IC3Bae,EACnB,aAAoC,IAAD,yDAAJ,GAAI,IAArBhD,SAAqB,MAAjB,EAAiB,MAAdE,SAAc,MAAV,EAAU,sBACjC2B,KAAK7B,EAAIA,EACT6B,KAAK3B,EAAIA,G,qPCKb,IAgJe+C,EAhJQ,SAAC,GAOjB,IAODC,EAbJpD,EAMI,EANJA,SACAM,EAKI,EALJA,MACAwB,EAII,EAJJA,MACAH,EAGI,EAHJA,UACAoB,EAEI,EAFJA,SACAM,EACI,EADJA,SAEMC,GAA+BxB,EAAMf,OADvC,EAE0CN,mBAC5C6C,GAHE,mBAEGC,EAFH,KAEoBC,EAFpB,OAK0B/C,oBAAS,GALnC,mBAKGC,EALH,KAKYC,EALZ,KAqCJ,SAAS8C,IACPD,GAAoBD,GAmCtB,SAASG,IAAwB,IAAdC,EAAa,uDAAJ,GAC1B,OAAO,IAAIjC,E,yVAAJ,EACL1B,WACAM,QACAwB,QACAH,aACGgC,IAYP,OACE,yBACEC,WAAW,EACXC,YArFJ,SAA6BrB,GAC3B,IAAMsB,EAAuBtB,EAAMuB,MAA7BD,EAAuCtB,EAAMwB,MAC7CC,EC1BH,SAAmBC,GACxB,IAAMC,EAAOD,EAAGE,wBAChB,MAAO,CACLlE,EAAGiE,EAAKlE,KAAOoE,OAAOC,QACtBlE,EAAG+D,EAAKhE,IAAMkE,OAAOE,SDsBGC,CAAUhC,EAAMlB,QACxC8B,EAAkB,CAChBlD,EAAG4D,EAAoBG,EAAgB/D,EACvCE,EAAG0D,EAAoBG,EAAgB7D,IAiFvCqE,UA9EJ,SAA2BjC,GACzB,GAAIA,EAAMlB,SAAWkB,EAAMkC,cAA3B,CAEA,IAIMC,EAAcjB,EAAU,CAAE1D,SAJf,IAAIkD,EAAS,CAC5BhD,EAAGsC,EAAMuB,MAAQX,EAAgBlD,EACjCE,EAAGoC,EAAMwB,MAAQZ,EAAgBhD,MAInC2C,EAAS4B,KAsEPzD,UAAWC,IAAW,aAAc,CAClC,iBAAkBnB,EAClB,iBAAkBU,IAEpB4B,MAhBK,CACLsC,UAAW,aAAe5E,EAASE,EAAI,MAAQF,EAASI,EAAI,OAASM,EAAU,aAAe,MAiB7FJ,GAAS,0BAAMY,UAAU,gBAAgBZ,GAC1C,0BAAMY,UAAU,uBAAuBX,QAASkD,GAAhD,KAGA,0BAAMvC,UAAU,0BAA0BX,QA7E9C,WACEI,GAAW,GAEXM,YAAW,WACToC,MACC,OAwED,SAIEvB,EAAMf,QAAUwC,IAChB,yBAAKrC,UAAU,eACb,kBAAC,IAAD,CAAU2D,IAAI,KAAK9B,SA1D3B,SAA+B+B,GAC7B,IAGMH,EAAcjB,EAAU,CAAE5B,MAHZgD,EAAMC,KAAI,SAAApD,GAAS,OACrCG,EAAMkD,MAAK,SAAAtC,GAAI,OAAIA,EAAKf,YAAcsD,SAAStD,WAGjDoB,EAAS4B,KAsDA7C,EAAMiD,KAnDjB,SAAiBrC,GACf,OACE,kBAAC,EAAD,CACEpC,MAAOoC,EAAKpC,MACZ4E,UAASxC,EAAKf,UACdwD,IAAKzC,EAAKf,UACVpB,QAAS,kBAtBf,SAA0BmC,GACxB,IAEMiC,EAAcjB,EAAU,CAAE5B,MAFVA,EAAMsD,QAAO,SAAAC,GAAC,OAAIA,EAAE1D,YAAce,EAAKf,eAG7DoB,EAAS4B,GACTnB,GAAmB,GAiBA8B,CAAiB5C,UAgD7Ba,GACC,kBAACgC,EAAD,CACEtD,WAAS,EACTC,SA9EZ,SAA0BQ,GACxB,IAAMiC,EAAcjB,EAAU,CAAE5B,MAAM,GAAD,mBAAMA,GAAN,CAAaY,MAClDK,EAAS4B,IA6ECxC,QAASsB,OE9HjB+B,EAAwBC,KAAKC,MACjCC,aAAaC,QAAQ,iBAAmB,MA2H3BC,MAxHf,WAAgB,IAAD,EACiBpF,mBAAS,IAD1B,mBACNqF,EADM,KACGC,EADH,OAEatF,mBAAS+E,GAFtB,mBAEN1D,EAFM,KAECkE,EAFD,OAGiCvF,mBAAS,MAH1C,mBAGNwF,EAHM,KAGWC,EAHX,OAI2BzF,oBAAS,GAJpC,mBAIN0F,EAJM,KAIQC,EAJR,KAsBb,SAASC,EAAgBC,MAA8B,2DAEnDP,EAAW,GAAD,mBAAKD,GAAL,CAAchE,KAE1BkE,EAASM,GACTX,aAAaY,QAAQ,eAAgBd,KAAKe,UAAUF,IAQtD,SAASG,EAAiBC,EAAUC,GAClC,IAAMC,EAAgB9E,EAAMsD,QAAO,SAAAC,GAAC,OAAIA,EAAE1D,YAAcgF,EAAShF,aACjE0E,EAAgB,GAAD,mBAAKO,GAAL,CAAoBF,KACnCR,EAAmB,MAGrB,SAASZ,EAAiB5C,GACxB,IAAMkE,EAAgB9E,EAAMsD,QAAO,SAAAC,GAAC,OAAIA,EAAE1D,YAAce,EAAKf,aAC7D0E,EAAgB,YAAIO,IAGtB,SAASC,IACP,GAAKf,EAAQ/E,OAAb,CAEAsF,EAAgBP,EAAQA,EAAQ/E,OAAS,IAAM,IAAI,GAEnD,IAAM+F,EAAU,YAAOhB,GACvBgB,EAAWC,MACXhB,EAAWe,IA/CbE,qBAAU,WACRC,SAASC,iBAAiB,WAAW,SAAA3F,GACjB,KAAdA,EAAE0B,UAAmB1B,EAAE4F,SAAW5F,EAAE6F,WACtC7F,EAAEkB,iBACFoE,WAkDN,IAAMQ,EAAevF,EAAMiD,KAAI,SAAArC,GAC7B,OAAIA,EAAKZ,OAiBOa,EAhBED,EAkBhB,kBAAC,EAAD,iBACMC,EADN,CAEEU,SAAU,kBAAMiC,EAAiB3C,IACjCI,SAAU,SAAA2D,GAAQ,OAAID,EAAiBC,EAAU/D,IACjDwC,IAAKxC,EAAMhB,cAjBjB,SAAiBe,GACf,OACE,kBAAC,EAAD,iBACMA,EADN,CAEEW,SAAU,kBAAMiC,EAAiB5C,IACjCK,SAAU,SAAA2D,GAAQ,OAAID,EAAiBC,EAAUhE,IACjDyC,IAAKzC,EAAKf,aATP2F,CAAQ5E,GAcjB,IAAkBC,KAWlB,OACE,yBAAKzB,UAAU,OACb,yBAAKA,UAAWC,IAAW,QAAS,CAAEoG,WAAYpB,IAAiB5F,QA5EvE,SAAuBiC,GACrB,GAAIA,EAAMlB,SAAWkB,EAAMkC,cAA3B,CAEA,IAAM1E,EAAW,IAAIkD,EAAS,CAAEhD,EAAGsC,EAAMuB,MAAO3D,EAAGoC,EAAMwB,QACzDkC,EAAmBlG,MAyEf,4BAAKqH,GACJpB,GAAmB,kBAACV,EAAD,CAClBrD,SAhER,SAA0BQ,GACxB2D,EAAgB,GAAD,mBAAKvE,GAAL,CAAYY,KAC3BwD,EAAmB,OA+DblG,SAAUiG,EACV9D,QAAS,kBAAM+D,EAAmB,SAEpC,4BACEhF,UAAWC,IAAW,cAAe,CAAEqG,QAAS1B,EAAQ/E,SACxDR,QAASsG,GAET,0BAAMY,KAAK,MAAMC,aAAW,QAA5B,iBAKF,4BACExG,UAAWC,IAAW,oBAAqB,CAAEqG,QAAS1F,EAAMf,SAC5DR,QArDR,WACE6F,GAAiBD,KAsDX,0BAAMsB,KAAK,MAAMC,aAAW,aACzBvB,EAAe,eAAO,oBCxHnCwB,IAASC,OAAO,kBAAC,EAAD,MAASX,SAASY,eAAe,W","file":"static/js/main.59f6a6a8.chunk.js","sourcesContent":["export function isLink(str) {\n  const pattern = new RegExp(\n    \"^(https?:\\\\/\\\\/)?\" + // protocol\n    \"((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|localhost|\" + // domain name\n    \"((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))\" + // OR ip (v4) address\n    \"(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*\" + // port and path\n    \"(\\\\?[;&a-z\\\\d%_.~+=-]*)?\" + // query string\n      \"(\\\\#[-a-z\\\\d_]*)?$\",\n    \"i\"\n  ); // fragment locator\n  return !!pattern.test(str);\n}\n\nexport function getStyleObject(position) {\n  if (!position) return {};\n\n  return { left: position.x, top: position.y };\n}\n","import React, { useState } from \"react\";\nimport Types from \"prop-types\";\nimport { isLink } from \"./utils\";\nimport classnames from 'classnames';\n\nconst ItemComponent = ({ title, onClick, ...otherProps }) => {\n  const [deleted, setDeleted] = useState(false);\n\n  function handleClick() {\n    setDeleted(true);\n\n    setTimeout(() => {\n      onClick();\n    }, 200);\n  }\n\n  function parseTitle() {\n    let urlSliceRegex = /(https?:\\/\\/)?(www\\.)?/;\n    if (isLink(title)) {\n      let parsedTitle = title.replace(urlSliceRegex, \"\");\n      if (parsedTitle.length > 43) {\n        return parsedTitle.slice(0, 40) + \"...\";\n      }\n      return parsedTitle;\n    }\n    return title;\n  }\n\n  return (\n    <li\n      {...otherProps}\n      onClick={handleClick}\n      className={classnames('item ', {\n        'item--collapse': deleted\n      })}\n    >\n      <span className=\"item-content\">\n        {isLink(title) ? (\n          <a\n            href={title}\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n            onClick={e => {\n              e.stopPropagation();\n            }}\n          >\n            {parseTitle()}\n          </a>\n        ) : (\n            parseTitle()\n          )}\n      </span>\n    </li>\n  );\n};\n\nItemComponent.propTypes = {\n  title: Types.string.isRequired,\n  onClick: Types.func\n};\n\nItemComponent.defaultProps = {\n  onClick: () => { }\n};\n\nexport default ItemComponent;\n","export default class Item {\n  constructor({\n    title = \"\",\n    position = null,\n    timeStamp = Date.now(),\n    items\n  } = {}) {\n    this.title = title;\n    this.position = position;\n    this.timeStamp = timeStamp;\n    this.items = items;\n  }\n}\n","import React, { useState } from \"react\";\nimport Types from \"prop-types\";\nimport Item from \"./Item\";\nimport { getStyleObject } from \"./utils\";\nimport classnames from 'classnames';\n\nconst NewItemFrom = ({ isGrouped = false, position, onCreate, onClose }) => {\n  const [newItemTitle, setNewItemTitle] = useState(\"\");\n\n  function handleCreateItem(event) {\n    event.preventDefault();\n\n    if (!newItemTitle.length) return;\n\n    const item = new Item({ position, title: newItemTitle });\n    onCreate(item);\n    setNewItemTitle(\"\");\n  }\n\n  function handleInputKeyDown(event) {\n    switch (event.keyCode) {\n      case 27: // esc\n        return onClose();\n      case 8: // backspace\n        if (newItemTitle.length) return;\n        return onClose();\n      default:\n        return;\n    }\n  }\n\n  function handleTitleChange({ target: { value } }) {\n    setNewItemTitle(value);\n  }\n\n  function handleCreateGroup() {\n    const group = new Item({\n      position: position,\n      title: newItemTitle,\n      items: []\n    });\n    onCreate(group);\n  }\n\n  return (\n    <form\n      className={classnames(\"new-item item\", { \"item--absolute\": position })}\n      style={getStyleObject(position)}\n      onSubmit={isGrouped ? handleCreateItem : handleCreateGroup}\n    >\n      <input\n        type=\"text\"\n        className=\"item-content\"\n        autoFocus={true}\n        value={newItemTitle}\n        onChange={handleTitleChange}\n        onKeyDown={handleInputKeyDown}\n      />\n    </form>\n  );\n};\n\nNewItemFrom.propTypes = {\n  isGrouped: Types.bool,\n  position: Types.shape({}),\n  onCreate: Types.func.isRequired,\n  onClose: Types.func.isRequired\n};\n\nexport default NewItemFrom;\n","export default class Position {\n  constructor({ x = 0, y = 0 } = {}) {\n    this.x = x;\n    this.y = y;\n  }\n}\n","import React, { useState } from \"react\";\nimport Types from \"prop-types\";\nimport Position, { getOffset } from \"../Position\";\nimport Item from \"../Item\";\nimport { ItemComponent, NewItemForm } from \"../Item\";\nimport Sortable from \"react-sortablejs\";\nimport classnames from 'classnames';\n\nconst GroupComponent = ({\n  position,\n  title,\n  items,\n  timeStamp,\n  onChange,\n  onRemove\n}) => {\n  const shouldShowItemFormByDefault = !items.length;\n  const [showNewItemForm, setShowNewItemForm] = useState(\n    shouldShowItemFormByDefault\n  );\n  const [deleted, setDeleted] = useState(false);\n\n  let dragStartOffset;\n\n  function handleItemDragStart(event) {\n    const pointerPosition = { x: event.pageX, y: event.pageY };\n    const elementPosition = getOffset(event.target);\n    dragStartOffset = {\n      x: pointerPosition.x - elementPosition.x,\n      y: pointerPosition.y - elementPosition.y\n    };\n  }\n  function handleItemDragEnd(event) {\n    if (event.target !== event.currentTarget) return;\n\n    const position = new Position({\n      x: event.pageX - dragStartOffset.x,\n      y: event.pageY - dragStartOffset.y\n    });\n    const editedGroup = cloneItem({ position });\n\n    onChange(editedGroup);\n  }\n\n  function handleGroupDelete() {\n    setDeleted(true);\n\n    setTimeout(() => {\n      onRemove();\n    }, 200);\n  }\n\n  function toggleNewItemForm() {\n    setShowNewItemForm(!showNewItemForm);\n  }\n\n  function handleItemCreate(item) {\n    const editedGroup = cloneItem({ items: [...items, item] });\n    onChange(editedGroup);\n  }\n\n  function handleItemRemove(item) {\n    const filteredItems = items.filter(i => i.timeStamp !== item.timeStamp);\n\n    const editedGroup = cloneItem({ items: filteredItems });\n    onChange(editedGroup);\n    setShowNewItemForm(false);\n  }\n\n  function handleItemOrderChange(order) {\n    const sortedItems = order.map(timeStamp =>\n      items.find(item => item.timeStamp === parseInt(timeStamp))\n    );\n    const editedGroup = cloneItem({ items: sortedItems });\n    onChange(editedGroup);\n  }\n\n  function mapItem(item) {\n    return (\n      <ItemComponent\n        title={item.title}\n        data-id={item.timeStamp}\n        key={item.timeStamp}\n        onClick={() => handleItemRemove(item)}\n      />\n    );\n  }\n\n  function cloneItem(params = {}) {\n    return new Item({\n      position,\n      title,\n      items,\n      timeStamp,\n      ...params\n    });\n  }\n\n  function getStyle() {\n    return {\n      transform: \"translate(\" + position.x + 'px,' + position.y + 'px)' + (deleted ? 'scale(0.7)' : '')\n    }\n  }\n  // TODO have an onDrag event for GroupComponent. The board will have an onDragOver listener\n  // TODO we'll always keep the dragged element in App.js state\n  // TODO if it moves, we instantly change the actual object\n  return (\n    <div\n      draggable={true}\n      onDragStart={handleItemDragStart}\n      onDragEnd={handleItemDragEnd}\n      className={classnames('item group', {\n        'item--absolute': position,\n        'item--collapse': deleted\n      })}\n      style={getStyle()}\n    >\n      {title && <span className=\"item-content\">{title}</span>}\n      <span className=\"item-add item-button\" onClick={toggleNewItemForm}>\n        +\n      </span>\n      <span className=\"item-remove item-button\" onClick={handleGroupDelete}>\n        &times;\n      </span>\n\n      {(items.length || showNewItemForm) && (\n        <div className=\"group-items\">\n          <Sortable tag=\"ul\" onChange={handleItemOrderChange}>\n            {items.map(mapItem)}\n          </Sortable>\n\n          {showNewItemForm && (\n            <NewItemForm\n              isGrouped\n              onCreate={handleItemCreate}\n              onClose={toggleNewItemForm}\n            />\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nGroupComponent.propTypes = {\n  position: Types.shape({ x: Types.number, y: Types.number }).isRequired,\n  title: Types.string.isRequired,\n  items: Types.array.isRequired,\n  onChange: Types.func.isRequired,\n  onRemove: Types.func.isRequired\n};\n\nexport default GroupComponent;\n","export function getOffset(el) {\n  const rect = el.getBoundingClientRect();\n  return {\n    x: rect.left + window.scrollX,\n    y: rect.top + window.scrollY\n  };\n}\n","import React, { useState, useEffect } from \"react\";\nimport classnames from 'classnames';\nimport \"./App.scss\";\n\nimport { NewItemForm } from \"./Item\";\nimport Position from \"./Position\";\nimport { GroupComponent } from \"./Group\";\nimport { ItemComponent } from \"./Item\";\n\nconst itemsFromLocalStorage = JSON.parse(\n  localStorage.getItem(\"dragly-items\") || \"[]\"\n);\n\nfunction App() {\n  const [history, setHistory] = useState([]);\n  const [items, setItems] = useState(itemsFromLocalStorage);\n  const [newItemPosition, setNewItemPosition] = useState(null);\n  const [isObfuscated, setIsObfuscated] = useState(false);\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", e => {\n      if (e.keyCode === 90 && (e.metaKey || e.ctrlKey)) {\n        e.preventDefault();\n        handleUndo();\n      }\n    });\n  });\n\n  function toggleAddItem(event) {\n    if (event.target !== event.currentTarget) return;\n\n    const position = new Position({ x: event.pageX, y: event.pageY });\n    setNewItemPosition(position);\n  }\n\n  function setItemsAndSave(newItems, saveHistory = true) {\n    if (saveHistory) {\n      setHistory([...history, items]);\n    }\n    setItems(newItems);\n    localStorage.setItem(\"dragly-items\", JSON.stringify(newItems));\n  }\n\n  function handleItemCreate(item) {\n    setItemsAndSave([...items, item]);\n    setNewItemPosition(null);\n  }\n\n  function handleItemChange(newValue, oldValue) {\n    const filteredItems = items.filter(i => i.timeStamp !== oldValue.timeStamp);\n    setItemsAndSave([...filteredItems, newValue]);\n    setNewItemPosition(null);\n  }\n\n  function handleItemRemove(item) {\n    const filteredItems = items.filter(i => i.timeStamp !== item.timeStamp);\n    setItemsAndSave([...filteredItems]);\n  }\n\n  function handleUndo() {\n    if (!history.length) return;\n\n    setItemsAndSave(history[history.length - 1] || [], false);\n\n    const newHistory = [...history];\n    newHistory.pop();\n    setHistory(newHistory);\n  }\n\n  function handleObfuscate() {\n    setIsObfuscated(!isObfuscated);\n  }\n\n  const itemElements = items.map(item => {\n    if (item.items) {\n      return mapGroup(item);\n    }\n    return mapItem(item);\n  });\n\n  function mapItem(item) {\n    return (\n      <ItemComponent\n        {...item}\n        onRemove={() => handleItemRemove(item)}\n        onChange={newValue => handleItemChange(newValue, item)}\n        key={item.timeStamp}\n      />\n    );\n  }\n\n  function mapGroup(group) {\n    return (\n      <GroupComponent\n        {...group}\n        onRemove={() => handleItemRemove(group)}\n        onChange={newValue => handleItemChange(newValue, group)}\n        key={group.timeStamp}\n      />\n    );\n  }\n\n  return (\n    <div className=\"app\">\n      <div className={classnames('board', { obfuscated: isObfuscated })} onClick={toggleAddItem}>\n        <ul>{itemElements}</ul>\n        {newItemPosition && <NewItemForm\n          onCreate={handleItemCreate}\n          position={newItemPosition}\n          onClose={() => setNewItemPosition(null)}\n        />}\n        <button\n          className={classnames(\"undo action\", { visible: history.length })}\n          onClick={handleUndo}\n        >\n          <span role=\"img\" aria-label=\"Undo\">\n            🤭\n          </span>\n        </button>\n\n        <button\n          className={classnames(\"obfuscate action \", { visible: items.length })}\n          onClick={handleObfuscate}\n        >\n          <span role=\"img\" aria-label=\"Obfuscate\">\n            {isObfuscated ? '🐵' : '🙈'}\n          </span>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}