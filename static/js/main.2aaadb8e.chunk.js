(this["webpackJsonpto-drag-list"]=this["webpackJsonpto-drag-list"]||[]).push([[0],{28:function(e,t,n){e.exports=n(52)},34:function(e,t,n){},35:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(17),i=n.n(a),o=n(21),r=n(1),c=n.n(r),s=n(22),l=n.n(s),u=(n(34),n(10)),m=n(7),f=n(6),d=n(5),p=n.n(d),g=(n(35),n(15)),v=n(23),b=n.n(v);function h(e){return b()(e)}function O(e){return e?{left:e.x,top:e.y}:{}}var j=["title","onClick"],y=function(e){var t=e.title,n=e.onClick,a=Object(g.a)(e,j),i=Object(r.useState)(!1),o=Object(f.a)(i,2),s=o[0],l=o[1];return c.a.createElement("li",Object.assign({},a,{onClick:function(){l(!0),setTimeout((function(){n()}),200)},className:p()("item ",{"item--collapse":s})}),c.a.createElement("span",{className:"item-content item-content-block",title:t},h(t)?c.a.createElement("a",{href:t,rel:"noreferrer noopener",target:"_blank",onClick:function(e){e.stopPropagation()}},h(t)?t.replace(/(https?:\/\/)?(www\.)?/,""):t):t))};y.defaultProps={onClick:function(){}};var E=y,S=n(11),C=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.title,a=void 0===n?"":n,i=t.position,o=void 0===i?null:i,r=t.timeStamp,c=void 0===r?Date.now():r,s=t.items;Object(S.a)(this,e),this.title=a,this.position=o,this.timeStamp=c,this.items=s},k=function(e){var t=e.isGrouped,n=void 0!==t&&t,a=e.position,i=e.onCreate,o=e.onClose,s=Object(r.useState)(""),l=Object(f.a)(s,2),u=l[0],m=l[1];return c.a.createElement("form",{className:p()("new-item item",{"item--absolute":a}),style:O(a),onSubmit:n?function(e){if(e.preventDefault(),u.length){var t=new C({position:a,title:u});i(t),m("")}}:function(){var e=new C({position:a,title:u,items:[]});i(e)}},c.a.createElement("input",{type:"text",className:"item-content",autoFocus:!0,value:u,onChange:function(e){var t=e.target.value;m(t)},onKeyDown:function(e){switch(e.keyCode){case 27:return o();case 8:if(u.length)return;return o();default:return}}}))};function w(e){var t=e.getBoundingClientRect();return{x:t.left+window.scrollX,y:t.top+window.scrollY}}var N=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.x,a=void 0===n?0:n,i=t.y,o=void 0===i?0:i;Object(S.a)(this,e),this.x=a,this.y=o},x=n(24),D=n.n(x),I=n(25),P=n(27),A=n(26),T=function(e){Object(P.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(S.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).ref=Object(r.createRef)(),e.state={dragPosition:null},e.dragStartOffset=null,e.isValidDragTarget=function(e){return!!!e.closest(".undraggable")},e.handleItemDragStart=function(t){if(e.isValidDragTarget(t.target)){var n=t.pageX,a=t.pageY,i=w(t.currentTarget);e.dragStartOffset={x:n-i.x,y:a-i.y},document.addEventListener("mousemove",e.handleItemDrag)}},e.handleItemDrag=function(t){var n=new N({x:t.pageX-e.dragStartOffset.x,y:t.pageY-e.dragStartOffset.y});e.setState({dragPosition:n})},e.handleItemDragEnd=function(){document.removeEventListener("mousemove",e.handleItemDrag),e.state.dragPosition&&(e.props.onDragEnd(Object(u.a)({},e.state.dragPosition)),e.setState({dragPosition:null}))},e}return Object(I.a)(n,[{key:"getStyle",value:function(e){return{left:e.x,top:e.y}}},{key:"render",value:function(){return c.a.createElement("div",{className:"draggable item--absolute",ref:this.ref,onMouseDown:this.handleItemDragStart,onMouseUp:this.handleItemDragEnd,style:this.getStyle(this.state.dragPosition||this.props.position)},this.props.children)}}]),n}(r.Component),L=["children","className"],R=function(e){var t=e.children,n=e.className,a=Object(g.a)(e,L);return c.a.createElement("div",Object.assign({className:p()("undraggable",n)},a),t)};R.defaultProps={className:""};var G=R;var J=c.a.memo((function(e){var t=e.position,n=e.title,a=e.items,i=e.timeStamp,o=e.onChange,s=e.onRemove,l=!a.length,d=Object(r.useState)(l),g=Object(f.a)(d,2),v=g[0],b=g[1],h=Object(r.useState)(!1),O=Object(f.a)(h,2),j=O[0],y=O[1];function S(e){b(!v)}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new C(Object(u.a)({position:t,title:n,items:a,timeStamp:i},e))}return c.a.createElement("div",{className:p()("item group",{"item--collapse":j}),style:{transform:j?"scale(0.7)":""}},n&&c.a.createElement("span",{className:"item-content"},n),c.a.createElement(G,{className:"item-add item-button",onClick:S},"+"),c.a.createElement(G,{className:"item-remove item-button",onClick:function(){y(!0),setTimeout((function(){s()}),200)}},"\xd7"),(a.length||v)&&c.a.createElement("div",{className:"group-items"},c.a.createElement(G,null,c.a.createElement(D.a,{tag:"ul",onChange:function(e){var t=w({items:e.map((function(e){return a.find((function(t){return t.timeStamp===parseInt(e)}))}))});o(t)}},a.map((function(e){return c.a.createElement(E,{key:e.timeStamp,"data-id":e.timeStamp,title:e.title,onClick:function(){return function(e){var t=w({items:a.filter((function(t){return t.timeStamp!==e.timeStamp}))});o(t),b(!1)}(e)}})}))),v&&c.a.createElement(k,{isGrouped:!0,onCreate:function(e){var t=w({items:[].concat(Object(m.a)(a),[e])});o(t)},onClose:S}))),!!a.length&&c.a.createElement(G,{onClick:function(){!function(e){var t=document.createElement("textarea");t.style={position:"absolute",top:"-1000px"},t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(function(e){var t=e.title,n=e.items,a=(void 0===n?[]:n).map((function(e){var t=e.title;return"- ".concat(t)}));return[t].concat(Object(m.a)(a)).join("\n")}({title:n,items:a}))},className:"item-copy"},c.a.createElement("button",null,"copy")))}));var K=function(e){var t=e.db,n=e.userId,a=Object(r.useState)([]),i=Object(f.a)(a,2),o=i[0],s=i[1],l=Object(r.useState)([]),d=Object(f.a)(l,2),g=d[0],v=d[1],b=Object(r.useState)(null),h=Object(f.a)(b,2),O=h[0],j=h[1],y=Object(r.useState)(!1),E=Object(f.a)(y,2),S=E[0],C=E[1];function w(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a&&s([].concat(Object(m.a)(o),[g])),v(e),t.collection("items").doc(n).set({items:JSON.parse(JSON.stringify(e))})}function x(e,t){var n=g.filter((function(e){return e.timeStamp!==t.timeStamp}));w([].concat(Object(m.a)(n),[e])),j(null)}function D(){if(o.length){w(o[o.length-1]||[],!1);var e=Object(m.a)(o);e.pop(),s(e)}}function I(e){return c.a.createElement(T,{position:e.position,onDragEnd:function(t){return x(Object(u.a)(Object(u.a)({},e),{},{position:t}),e)},key:e.timeStamp},c.a.createElement(J,Object.assign({},e,{onRemove:function(){return function(e){var t=g.filter((function(t){return t.timeStamp!==e.timeStamp}));w(Object(m.a)(t))}(e)},onChange:function(t){return x(t,e)}})))}Object(r.useEffect)((function(){document.addEventListener("keydown",(function(e){90===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),D())}))})),Object(r.useEffect)((function(){t.collection("items").doc(n).get().then((function(e){e.exists&&v(e.data().items)}))}),[t,n]);var P=g.map((function(e){return I(e)}));return c.a.createElement("div",{className:"app"},c.a.createElement("div",{className:p()("board",{obfuscated:S},"production"),onClick:function(e){if(e.target===e.currentTarget){var t=new N({x:e.pageX,y:e.pageY});j(t)}}},c.a.createElement("ul",null,P),O&&c.a.createElement(k,{onCreate:function(e){w([].concat(Object(m.a)(g),[e])),j(null)},position:O,onClose:function(){return j(null)}}),c.a.createElement("button",{className:p()("undo action",{visible:o.length}),onClick:D},c.a.createElement("span",{role:"img","aria-label":"Undo"},"\ud83e\udd2d")),c.a.createElement("button",{className:p()("obfuscate action ",{visible:g.length}),onClick:function(){C(!S)}},c.a.createElement("span",{role:"img","aria-label":"Obfuscate"},S?"\ud83d\udc35":"\ud83d\ude48"))))},X=n(41);n(51);X.initializeApp({apiKey:"AIzaSyC5Er4oZT-e4woRNxf9ZG59c4-MnP9ussQ",authDomain:"dragly-359ad.firebaseapp.com",projectId:"dragly-359ad",storageBucket:"",messagingSenderId:"747702472609",appId:"1:747702472609:web:3f48f2bbe7117d8c87c5e0"});var Y=X.firestore();function B(){return(B=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return n=new X.auth.GoogleAuthProvider,e.next=4,X.auth().setPersistence(X.auth.Auth.Persistence.LOCAL);case 4:return e.next=6,X.auth().signInWithPopup(n);case 6:t&&l.a.render(c.a.createElement(K,{db:Y,userId:t.uid}),document.getElementById("root"));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}X.auth().onAuthStateChanged((function(e){!function(e){B.apply(this,arguments)}(e)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.2aaadb8e.chunk.js.map