(this["webpackJsonpto-drag-list"]=this["webpackJsonpto-drag-list"]||[]).push([[0],{14:function(e,t,n){e.exports=n(26)},19:function(e,t,n){},20:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(8),i=n.n(o),c=(n(19),n(4)),s=n(3),l=n(2),u=n(1),m=n.n(u),f=(n(20),n(6));function p(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|localhost|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}function g(e){return e?{left:e.x,top:e.y}:{}}var b=function(e){var t=e.title,n=e.onClick,o=Object(f.a)(e,["title","onClick"]),i=Object(r.useState)(!1),c=Object(l.a)(i,2),s=c[0],u=c[1];function g(){if(p(t)){var e=t.replace(/(https?:\/\/)?(www\.)?/,"");return e.length>43?e.slice(0,40)+"...":e}return t}return a.a.createElement("li",Object.assign({},o,{onClick:function(){u(!0),setTimeout((function(){n()}),200)},className:m()("item ",{"item--collapse":s})}),a.a.createElement("span",{className:"item-content"},p(t)?a.a.createElement("a",{href:t,rel:"noreferrer noopener",target:"_blank",onClick:function(e){e.stopPropagation()}},g()):g()))};b.defaultProps={onClick:function(){}};var d=b,O=n(5),v=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.title,r=void 0===n?"":n,a=t.position,o=void 0===a?null:a,i=t.timeStamp,c=void 0===i?Date.now():i,s=t.items;Object(O.a)(this,e),this.title=r,this.position=o,this.timeStamp=c,this.items=s},h=function(e){var t=e.isGrouped,n=void 0!==t&&t,o=e.position,i=e.onCreate,c=e.onClose,s=Object(r.useState)(""),u=Object(l.a)(s,2),f=u[0],p=u[1];return a.a.createElement("form",{className:m()("new-item item",{"item--absolute":o}),style:g(o),onSubmit:n?function(e){if(e.preventDefault(),f.length){var t=new v({position:o,title:f});i(t),p("")}}:function(){var e=new v({position:o,title:f,items:[]});i(e)}},a.a.createElement("input",{type:"text",className:"item-content",autoFocus:!0,value:f,onChange:function(e){var t=e.target.value;p(t)},onKeyDown:function(e){switch(e.keyCode){case 27:return c();case 8:if(f.length)return;return c();default:return}}}))};var j=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.x,r=void 0===n?0:n,a=t.y,o=void 0===a?0:a;Object(O.a)(this,e),this.x=r,this.y=o},y=n(9),S=n.n(y),E=n(10),w=n(12),P=n(11),D=n(13);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var k=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(o)))).ref=Object(r.createRef)(),n.state={dragPosition:n.props.position},n.dragStartOffset=null,n.isValidDragTarget=function(e){return!!!e.closest(".undraggable")},n.handleItemDragStart=function(e){if(n.isValidDragTarget(e.target)){var t=e.pageX,r=e.pageY,a=function(e){var t=e.getBoundingClientRect();return{x:t.left+window.scrollX,y:t.top+window.scrollY}}(e.currentTarget);n.dragStartOffset={x:t-a.x,y:r-a.y},document.addEventListener("mousemove",n.handleItemDrag)}},n.handleItemDrag=function(e){var t=new j({x:e.pageX-n.dragStartOffset.x,y:e.pageY-n.dragStartOffset.y});n.setState({dragPosition:t})},n.handleItemDragEnd=function(){document.removeEventListener("mousemove",n.handleItemDrag),n.state.dragPosition&&(n.props.onDragEnd(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state.dragPosition)),n.setState({dragPosition:null}))},n}return Object(D.a)(t,e),Object(E.a)(t,[{key:"getStyle",value:function(e){return{left:e.x,top:e.y}}},{key:"render",value:function(){return a.a.createElement("div",{className:"draggable item--absolute",ref:this.ref,onMouseDown:this.handleItemDragStart,onMouseUp:this.handleItemDragEnd,style:this.getStyle(this.state.dragPosition||this.props.position)},this.props.children)}}]),t}(r.Component),N=function(e){var t=e.children,n=e.className,r=Object(f.a)(e,["children","className"]);return a.a.createElement("div",Object.assign({className:m()("undraggable",n)},r),t)};N.defaultProps={className:""};var x=N;function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var z=a.a.memo((function(e){var t=e.position,n=e.title,o=e.items,i=e.timeStamp,u=e.onChange,f=e.onRemove,p=!o.length,g=Object(r.useState)(p),b=Object(l.a)(g,2),O=b[0],j=b[1],y=Object(r.useState)(!1),E=Object(l.a)(y,2),w=E[0],P=E[1];function D(e){j(!O)}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new v(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:t,title:n,items:o,timeStamp:i},e))}return a.a.createElement("div",{className:m()("item group",{"item--collapse":w}),style:{transform:w?"scale(0.7)":""}},n&&a.a.createElement("span",{className:"item-content"},n),a.a.createElement(x,{className:"item-add item-button",onClick:D},"+"),a.a.createElement(x,{className:"item-remove item-button",onClick:function(){P(!0),setTimeout((function(){f()}),200)}},"\xd7"),(o.length||O)&&a.a.createElement("div",{className:"group-items"},a.a.createElement(x,null,a.a.createElement(S.a,{tag:"ul",onChange:function(e){console.log(n,e,o.map((function(e){return e.timeStamp.toString()})));var t=C({items:e.map((function(e){return o.find((function(t){return t.timeStamp===parseInt(e)}))}))});u(t)}},o.map((function(e){return a.a.createElement(d,{key:e.timeStamp,"data-id":e.timeStamp,title:e.title,onClick:function(){return function(e){var t=C({items:o.filter((function(t){return t.timeStamp!==e.timeStamp}))});u(t),j(!1)}(e)}})}))),O&&a.a.createElement(h,{isGrouped:!0,onCreate:function(e){var t=C({items:[].concat(Object(s.a)(o),[e])});u(t)},onClose:D}))))}));function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var R=JSON.parse(localStorage.getItem("dragly-items")||"[]");var J=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(R),u=Object(l.a)(i,2),f=u[0],p=u[1],g=Object(r.useState)(null),b=Object(l.a)(g,2),d=b[0],O=b[1],v=Object(r.useState)(!1),y=Object(l.a)(v,2),S=y[0],E=y[1];function w(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&o([].concat(Object(s.a)(n),[f])),p(e),localStorage.setItem("dragly-items",JSON.stringify(e))}function P(e,t){var n=f.filter((function(e){return e.timeStamp!==t.timeStamp}));w([].concat(Object(s.a)(n),[e])),O(null)}function D(){if(n.length){w(n[n.length-1]||[],!1);var e=Object(s.a)(n);e.pop(),o(e)}}function C(e){return a.a.createElement(k,{position:e.position,onDragEnd:function(t){return P(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{position:t}),e)},key:e.timeStamp},a.a.createElement(z,Object.assign({},e,{onRemove:function(){return function(e){var t=f.filter((function(t){return t.timeStamp!==e.timeStamp}));w(Object(s.a)(t))}(e)},onChange:function(t){return P(t,e)}})))}Object(r.useEffect)((function(){document.addEventListener("keydown",(function(e){90===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),D())}))}));var N=f.map((function(e){return C(e)}));return a.a.createElement("div",{className:"app"},a.a.createElement("div",{className:m()("board",{obfuscated:S}),onClick:function(e){if(e.target===e.currentTarget){var t=new j({x:e.pageX,y:e.pageY});O(t)}}},a.a.createElement("ul",null,N),d&&a.a.createElement(h,{onCreate:function(e){w([].concat(Object(s.a)(f),[e])),O(null)},position:d,onClose:function(){return O(null)}}),a.a.createElement("button",{className:m()("undo action",{visible:n.length}),onClick:D},a.a.createElement("span",{role:"img","aria-label":"Undo"},"\ud83e\udd2d")),a.a.createElement("button",{className:m()("obfuscate action ",{visible:f.length}),onClick:function(){E(!S)}},a.a.createElement("span",{role:"img","aria-label":"Obfuscate"},S?"\ud83d\udc35":"\ud83d\ude48"))))};i.a.render(a.a.createElement(J,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.f0e2797d.chunk.js.map