(this["webpackJsonpto-drag-list"]=this["webpackJsonpto-drag-list"]||[]).push([[0],{10:function(t,e,n){t.exports=n(22)},15:function(t,e,n){},16:function(t,e,n){},22:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(6),o=n.n(r),c=(n(15),n(3)),l=n(1),u=n(2),s=n.n(u),m=(n(16),n(9));function f(t){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|localhost|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)}function p(t){return t?{left:t.x,top:t.y}:{}}var g=function(t){var e=t.title,n=t.onClick,r=Object(m.a)(t,["title","onClick"]),o=Object(a.useState)(!1),c=Object(l.a)(o,2),u=c[0],p=c[1];function g(){if(f(e)){var t=e.replace(/(https?:\/\/)?(www\.)?/,"");return t.length>43?t.slice(0,40)+"...":t}return e}return i.a.createElement("li",Object.assign({},r,{onClick:function(){p(!0),setTimeout((function(){n()}),200)},className:s()("item ",{"item--collapse":u})}),i.a.createElement("span",{className:"item-content"},f(e)?i.a.createElement("a",{href:e,rel:"noreferrer noopener",target:"_blank",onClick:function(t){t.stopPropagation()}},g()):g()))};g.defaultProps={onClick:function(){}};var b=g,v=n(4),d=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.title,a=void 0===n?"":n,i=e.position,r=void 0===i?null:i,o=e.timeStamp,c=void 0===o?Date.now():o,l=e.items;Object(v.a)(this,t),this.title=a,this.position=r,this.timeStamp=c,this.items=l},O=function(t){var e=t.isGrouped,n=void 0!==e&&e,r=t.position,o=t.onCreate,c=t.onClose,u=Object(a.useState)(""),m=Object(l.a)(u,2),f=m[0],g=m[1];return i.a.createElement("form",{className:s()("new-item item",{"item--absolute":r}),style:p(r),onSubmit:n?function(t){if(t.preventDefault(),f.length){var e=new d({position:r,title:f});o(e),g("")}}:function(){var t=new d({position:r,title:f,items:[]});o(t)}},i.a.createElement("input",{type:"text",className:"item-content",autoFocus:!0,value:f,onChange:function(t){var e=t.target.value;g(e)},onKeyDown:function(t){switch(t.keyCode){case 27:return c();case 8:if(f.length)return;return c();default:return}}}))};var j=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.x,a=void 0===n?0:n,i=e.y,r=void 0===i?0:i;Object(v.a)(this,t),this.x=a,this.y=r},h=n(7),y=n(8),E=n.n(y);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var w=function(t){var e,n=t.position,r=t.title,o=t.items,u=t.timeStamp,m=t.onChange,f=t.onRemove,p=!o.length,g=Object(a.useState)(p),v=Object(l.a)(g,2),y=v[0],w=v[1],C=Object(a.useState)(!1),k=Object(l.a)(C,2),x=k[0],N=k[1];function D(){w(!y)}function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new d(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(n,!0).forEach((function(e){Object(h.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({position:n,title:r,items:o,timeStamp:u},t))}return i.a.createElement("div",{draggable:!0,onDragStart:function(t){var n=t.pageX,a=t.pageY,i=function(t){var e=t.getBoundingClientRect();return{x:e.left+window.scrollX,y:e.top+window.scrollY}}(t.target);e={x:n-i.x,y:a-i.y}},onDragEnd:function(t){if(t.target===t.currentTarget){var n=P({position:new j({x:t.pageX-e.x,y:t.pageY-e.y})});m(n)}},className:s()("item group",{"item--absolute":n,"item--collapse":x}),style:{transform:"translate("+n.x+"px,"+n.y+"px)"+(x?"scale(0.7)":"")}},r&&i.a.createElement("span",{className:"item-content"},r),i.a.createElement("span",{className:"item-add item-button",onClick:D},"+"),i.a.createElement("span",{className:"item-remove item-button",onClick:function(){N(!0),setTimeout((function(){f()}),200)}},"\xd7"),(o.length||y)&&i.a.createElement("div",{className:"group-items"},i.a.createElement(E.a,{tag:"ul",onChange:function(t){var e=P({items:t.map((function(t){return o.find((function(e){return e.timeStamp===parseInt(t)}))}))});m(e)}},o.map((function(t){return i.a.createElement(b,{title:t.title,"data-id":t.timeStamp,key:t.timeStamp,onClick:function(){return function(t){var e=P({items:o.filter((function(e){return e.timeStamp!==t.timeStamp}))});m(e),w(!1)}(t)}})}))),y&&i.a.createElement(O,{isGrouped:!0,onCreate:function(t){var e=P({items:[].concat(Object(c.a)(o),[t])});m(e)},onClose:D})))},C=JSON.parse(localStorage.getItem("dragly-items")||"[]");var k=function(){var t=Object(a.useState)([]),e=Object(l.a)(t,2),n=e[0],r=e[1],o=Object(a.useState)(C),u=Object(l.a)(o,2),m=u[0],f=u[1],p=Object(a.useState)(null),g=Object(l.a)(p,2),v=g[0],d=g[1],h=Object(a.useState)(!1),y=Object(l.a)(h,2),E=y[0],S=y[1];function k(t){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&r([].concat(Object(c.a)(n),[m])),f(t),localStorage.setItem("dragly-items",JSON.stringify(t))}function x(t,e){var n=m.filter((function(t){return t.timeStamp!==e.timeStamp}));k([].concat(Object(c.a)(n),[t])),d(null)}function N(t){var e=m.filter((function(e){return e.timeStamp!==t.timeStamp}));k(Object(c.a)(e))}function D(){if(n.length){k(n[n.length-1]||[],!1);var t=Object(c.a)(n);t.pop(),r(t)}}Object(a.useEffect)((function(){document.addEventListener("keydown",(function(t){90===t.keyCode&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),D())}))}));var P=m.map((function(t){return t.items?(e=t,i.a.createElement(w,Object.assign({},e,{onRemove:function(){return N(e)},onChange:function(t){return x(t,e)},key:e.timeStamp}))):function(t){return i.a.createElement(b,Object.assign({},t,{onRemove:function(){return N(t)},onChange:function(e){return x(e,t)},key:t.timeStamp}))}(t);var e}));return i.a.createElement("div",{className:"app"},i.a.createElement("div",{className:s()("board",{obfuscated:E}),onClick:function(t){if(t.target===t.currentTarget){var e=new j({x:t.pageX,y:t.pageY});d(e)}}},i.a.createElement("ul",null,P),v&&i.a.createElement(O,{onCreate:function(t){k([].concat(Object(c.a)(m),[t])),d(null)},position:v,onClose:function(){return d(null)}}),i.a.createElement("button",{className:s()("undo action",{visible:n.length}),onClick:D},i.a.createElement("span",{role:"img","aria-label":"Undo"},"\ud83e\udd2d")),i.a.createElement("button",{className:s()("obfuscate action ",{visible:m.length}),onClick:function(){S(!E)}},i.a.createElement("span",{role:"img","aria-label":"Obfuscate"},E?"\ud83d\udc35":"\ud83d\ude48"))))};o.a.render(i.a.createElement(k,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.59f6a6a8.chunk.js.map