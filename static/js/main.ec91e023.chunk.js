(this["webpackJsonpto-drag-list"]=this["webpackJsonpto-drag-list"]||[]).push([[0],{10:function(t,e,n){t.exports=n(22)},15:function(t,e,n){},16:function(t,e,n){},22:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),o=n(6),r=n.n(o),c=(n(15),n(3)),l=n(1),u=n(2),s=n.n(u),m=(n(16),n(9));function f(t){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|localhost|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)}function p(t){return t?{left:t.x,top:t.y}:{}}var g=function(t){var e=t.title,n=t.onClick,o=Object(m.a)(t,["title","onClick"]),r=Object(a.useState)(!1),c=Object(l.a)(r,2),u=c[0],p=c[1];function g(){if(f(e)){var t=e.replace(/(https?:\/\/)?(www\.)?/,"");return t.length>43?t.slice(0,40)+"...":t}return e}return i.a.createElement("li",Object.assign({},o,{onClick:function(){p(!0),setTimeout((function(){n()}),200)},className:s()("item ",{"item--collapse":u})}),i.a.createElement("span",{className:"item-content"},f(e)?i.a.createElement("a",{href:e,rel:"noreferrer noopener",target:"_blank",onClick:function(t){t.stopPropagation()}},g()):g()))};g.defaultProps={onClick:function(){}};var v=g,b=n(4),d=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.title,a=void 0===n?"":n,i=e.position,o=void 0===i?null:i,r=e.timeStamp,c=void 0===r?Date.now():r,l=e.items;Object(b.a)(this,t),this.title=a,this.position=o,this.timeStamp=c,this.items=l},O=function(t){var e=t.isGrouped,n=void 0!==e&&e,o=t.position,r=t.onCreate,c=t.onClose,u=Object(a.useState)(""),s=Object(l.a)(u,2),m=s[0],f=s[1];return i.a.createElement("form",{className:"new-item item"+(o?" item--absolute":""),style:p(o),onSubmit:n?function(t){if(t.preventDefault(),m.length){var e=new d({position:o,title:m});r(e),f("")}}:function(){var t=new d({position:o,title:m,items:[]});r(t)}},i.a.createElement("input",{type:"text",className:"item-content",autoFocus:!0,value:m,onChange:function(t){var e=t.target.value;f(e)},onKeyDown:function(t){switch(t.keyCode){case 27:return c();case 8:if(m.length)return;return c();default:return}}}))};var h=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.x,a=void 0===n?0:n,i=e.y,o=void 0===i?0:i;Object(b.a)(this,t),this.x=a,this.y=o},j=n(7),y=n(8),w=n.n(y);function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var S=function(t){var e,n=t.position,o=t.title,r=t.items,u=t.timeStamp,m=t.onChange,f=t.onRemove,p=!r.length,g=Object(a.useState)(p),b=Object(l.a)(g,2),y=b[0],S=b[1],C=Object(a.useState)(!1),k=Object(l.a)(C,2),N=k[0],x=k[1];function D(){S(!y)}function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new d(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(n,!0).forEach((function(e){Object(j.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({position:n,title:o,items:r,timeStamp:u},t))}return i.a.createElement("div",{draggable:!0,onDragStart:function(t){var n=t.pageX,a=t.pageY,i=function(t){var e=t.getBoundingClientRect();return{x:e.left+window.scrollX,y:e.top+window.scrollY}}(t.target);e={x:n-i.x,y:a-i.y}},onDragEnd:function(t){if(t.target===t.currentTarget){var n=P({position:new h({x:t.pageX-e.x,y:t.pageY-e.y})});m(n)}},className:s()("item group",{"item--absolute":n,"item--collapse":N}),style:{left:n.x,top:n.y}},o&&i.a.createElement("span",{className:"item-content"},o),i.a.createElement("span",{className:"item-add item-button",onClick:D},"+"),i.a.createElement("span",{className:"item-remove item-button",onClick:function(){x(!0),setTimeout((function(){f()}),200)}},"\xd7"),(r.length||y)&&i.a.createElement("div",{className:"group-items"},i.a.createElement(w.a,{tag:"ul",onChange:function(t){var e=P({items:t.map((function(t){return r.find((function(e){return e.timeStamp===parseInt(t)}))}))});m(e)}},r.map((function(t){return i.a.createElement(v,{title:t.title,"data-id":t.timeStamp,key:t.timeStamp,onClick:function(){return function(t){var e=P({items:r.filter((function(e){return e.timeStamp!==t.timeStamp}))});m(e),S(!1)}(t)}})}))),y&&i.a.createElement(O,{isGrouped:!0,onCreate:function(t){var e=P({items:[].concat(Object(c.a)(r),[t])});m(e)},onClose:D})))},C=JSON.parse(localStorage.getItem("dragly-items")||"[]");var k=function(){var t=Object(a.useState)([]),e=Object(l.a)(t,2),n=e[0],o=e[1],r=Object(a.useState)(C),u=Object(l.a)(r,2),m=u[0],f=u[1],p=Object(a.useState)(null),g=Object(l.a)(p,2),b=g[0],d=g[1],j=Object(a.useState)(!1),y=Object(l.a)(j,2),w=y[0],E=y[1];function k(t){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&o([].concat(Object(c.a)(n),[m])),f(t),localStorage.setItem("dragly-items",JSON.stringify(t))}function N(t,e){var n=m.filter((function(t){return t.timeStamp!==e.timeStamp}));k([].concat(Object(c.a)(n),[t])),d(null)}function x(t){var e=m.filter((function(e){return e.timeStamp!==t.timeStamp}));k(Object(c.a)(e))}function D(){if(n.length){k(n[n.length-1]||[],!1);var t=Object(c.a)(n);t.pop(),o(t)}}Object(a.useEffect)((function(){document.addEventListener("keydown",(function(t){90===t.keyCode&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),D())}))}));var P=m.map((function(t){return t.items?(e=t,i.a.createElement(S,Object.assign({},e,{onRemove:function(){return x(e)},onChange:function(t){return N(t,e)},key:e.timeStamp}))):function(t){return i.a.createElement(v,Object.assign({},t,{onRemove:function(){return x(t)},onChange:function(e){return N(e,t)},key:t.timeStamp}))}(t);var e}));return i.a.createElement("div",{className:"app"},i.a.createElement("div",{className:s()("board",{obfuscated:w}),onClick:function(t){if(t.target===t.currentTarget){var e=new h({x:t.pageX,y:t.pageY});d(e)}}},i.a.createElement("ul",null,P),b&&i.a.createElement(O,{onCreate:function(t){k([].concat(Object(c.a)(m),[t])),d(null)},position:b,onClose:function(){return d(null)}}),i.a.createElement("button",{className:s()("undo action",{visible:n.length}),onClick:D},i.a.createElement("span",{role:"img","aria-label":"Undo"},"\ud83e\udd2d")),i.a.createElement("button",{className:s()("obfuscate action ",{visible:m.length}),onClick:function(){E(!w)}},i.a.createElement("span",{role:"img","aria-label":"Obfuscate"},w?"\ud83d\udc35":"\ud83d\ude48"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.ec91e023.chunk.js.map