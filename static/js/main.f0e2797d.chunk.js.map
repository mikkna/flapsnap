{"version":3,"sources":["Item/utils.js","Item/ItemComponent.js","Item/Item.js","Item/NewItemForm.js","Position/Position.js","Draggable/Draggable.js","Position/utils.js","Draggable/Undraggable.js","Group/GroupComponent.js","App.js","index.js"],"names":["isLink","str","RegExp","test","getStyleObject","position","left","x","top","y","ItemComponent","title","onClick","otherProps","useState","deleted","setDeleted","parseTitle","parsedTitle","replace","length","slice","setTimeout","className","classnames","href","rel","target","e","stopPropagation","defaultProps","Item","timeStamp","Date","now","items","this","NewItemFrom","isGrouped","onCreate","onClose","newItemTitle","setNewItemTitle","style","onSubmit","event","preventDefault","item","group","type","autoFocus","value","onChange","onKeyDown","keyCode","Position","Draggable","ref","createRef","state","dragPosition","props","dragStartOffset","isValidDragTarget","closest","handleItemDragStart","pointerPosition","pageX","pageY","elementPosition","el","rect","getBoundingClientRect","window","scrollX","scrollY","getOffset","currentTarget","document","addEventListener","handleItemDrag","newPosition","setState","handleItemDragEnd","removeEventListener","onDragEnd","onMouseDown","onMouseUp","getStyle","children","Component","Undraggable","rest","React","memo","onRemove","shouldShowItemFormByDefault","showNewItemForm","setShowNewItemForm","toggleNewItemForm","cloneItem","params","transform","tag","order","console","log","map","i","toString","editedGroup","find","parseInt","key","data-id","filter","handleItemRemove","NewItemForm","itemsFromLocalStorage","JSON","parse","localStorage","getItem","App","history","setHistory","setItems","newItemPosition","setNewItemPosition","isObfuscated","setIsObfuscated","setItemsAndSave","newItems","setItem","stringify","handleItemChange","newValue","oldValue","filteredItems","handleUndo","newHistory","pop","mapGroup","newPos","useEffect","metaKey","ctrlKey","groupElements","obfuscated","visible","role","aria-label","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.f0e2797d.chunk.js","sourcesContent":["export function isLink(str) {\n  const pattern = new RegExp(\n    \"^(https?:\\\\/\\\\/)?\" + // protocol\n    \"((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|localhost|\" + // domain name\n    \"((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))\" + // OR ip (v4) address\n    \"(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*\" + // port and path\n    \"(\\\\?[;&a-z\\\\d%_.~+=-]*)?\" + // query string\n      \"(\\\\#[-a-z\\\\d_]*)?$\",\n    \"i\"\n  ); // fragment locator\n  return !!pattern.test(str);\n}\n\nexport function getStyleObject(position) {\n  if (!position) return {};\n\n  return { left: position.x, top: position.y };\n}\n","import React, { useState } from \"react\";\nimport Types from \"prop-types\";\nimport { isLink } from \"./utils\";\nimport classnames from \"classnames\";\n\nconst ItemComponent = ({ title, onClick, ...otherProps }) => {\n  const [deleted, setDeleted] = useState(false);\n\n  function handleClick() {\n    setDeleted(true);\n\n    setTimeout(() => {\n      onClick();\n    }, 200);\n  }\n\n  function parseTitle() {\n    let urlSliceRegex = /(https?:\\/\\/)?(www\\.)?/;\n    if (isLink(title)) {\n      let parsedTitle = title.replace(urlSliceRegex, \"\");\n      if (parsedTitle.length > 43) {\n        return parsedTitle.slice(0, 40) + \"...\";\n      }\n      return parsedTitle;\n    }\n    return title;\n  }\n\n  return (\n    <li\n      {...otherProps}\n      onClick={handleClick}\n      className={classnames(\"item \", {\n        \"item--collapse\": deleted\n      })}\n    >\n      <span className=\"item-content\">\n        {isLink(title) ? (\n          <a\n            href={title}\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n            onClick={e => {\n              e.stopPropagation();\n            }}\n          >\n            {parseTitle()}\n          </a>\n        ) : (\n          parseTitle()\n        )}\n      </span>\n    </li>\n  );\n};\n\nItemComponent.propTypes = {\n  title: Types.string.isRequired,\n  onClick: Types.func\n};\n\nItemComponent.defaultProps = {\n  onClick: () => {}\n};\n\nexport default ItemComponent;\n","export default class Item {\n  constructor({\n    title = \"\",\n    position = null,\n    timeStamp = Date.now(),\n    items\n  } = {}) {\n    this.title = title;\n    this.position = position;\n    this.timeStamp = timeStamp;\n    this.items = items;\n  }\n}\n","import React, { useState } from \"react\";\nimport Types from \"prop-types\";\nimport Item from \"./Item\";\nimport { getStyleObject } from \"./utils\";\nimport classnames from \"classnames\";\n\nconst NewItemFrom = ({ isGrouped = false, position, onCreate, onClose }) => {\n  const [newItemTitle, setNewItemTitle] = useState(\"\");\n\n  function handleCreateItem(event) {\n    event.preventDefault();\n\n    if (!newItemTitle.length) return;\n\n    const item = new Item({ position, title: newItemTitle });\n    onCreate(item);\n    setNewItemTitle(\"\");\n  }\n\n  function handleInputKeyDown(event) {\n    switch (event.keyCode) {\n      case 27: // esc\n        return onClose();\n      case 8: // backspace\n        if (newItemTitle.length) return;\n        return onClose();\n      default:\n        return;\n    }\n  }\n\n  function handleTitleChange({ target: { value } }) {\n    setNewItemTitle(value);\n  }\n\n  function handleCreateGroup() {\n    const group = new Item({\n      position: position,\n      title: newItemTitle,\n      items: []\n    });\n    onCreate(group);\n  }\n\n  return (\n    <form\n      className={classnames(\"new-item item\", { \"item--absolute\": position })}\n      style={getStyleObject(position)}\n      onSubmit={isGrouped ? handleCreateItem : handleCreateGroup}\n    >\n      <input\n        type=\"text\"\n        className=\"item-content\"\n        autoFocus={true}\n        value={newItemTitle}\n        onChange={handleTitleChange}\n        onKeyDown={handleInputKeyDown}\n      />\n    </form>\n  );\n};\n\nNewItemFrom.propTypes = {\n  isGrouped: Types.bool,\n  position: Types.shape({}),\n  onCreate: Types.func.isRequired,\n  onClose: Types.func.isRequired\n};\n\nexport default NewItemFrom;\n","export default class Position {\n  constructor({ x = 0, y = 0 } = {}) {\n    this.x = x;\n    this.y = y;\n  }\n}\n","import React, { Component, createRef } from \"react\";\nimport Types from \"prop-types\";\nimport Position, { getOffset } from \"../Position\";\n\nclass Draggable extends Component {\n  static propTypes = {\n    children: Types.node.isRequired,\n    onDragEnd: Types.func.isRequired,\n    position: Types.shape({\n      x: Types.number.isRequired,\n      y: Types.number.isRequired\n    }).isRequired\n  };\n\n  ref = createRef();\n\n  state = {\n    dragPosition: this.props.position\n  };\n\n  dragStartOffset = null;\n\n  isValidDragTarget = target => {\n    const isChildOfGroupItems = !!target.closest(\".undraggable\");\n    return !isChildOfGroupItems;\n  };\n\n  handleItemDragStart = event => {\n    if (!this.isValidDragTarget(event.target)) return;\n\n    const pointerPosition = { x: event.pageX, y: event.pageY };\n    const elementPosition = getOffset(event.currentTarget);\n    this.dragStartOffset = {\n      x: pointerPosition.x - elementPosition.x,\n      y: pointerPosition.y - elementPosition.y\n    };\n\n    document.addEventListener(\"mousemove\", this.handleItemDrag);\n  };\n\n  handleItemDrag = event => {\n    const newPosition = new Position({\n      x: event.pageX - this.dragStartOffset.x,\n      y: event.pageY - this.dragStartOffset.y\n    });\n\n    this.setState({\n      dragPosition: newPosition\n    });\n  };\n\n  handleItemDragEnd = () => {\n    document.removeEventListener(\"mousemove\", this.handleItemDrag);\n\n    if (this.state.dragPosition) {\n      this.props.onDragEnd({ ...this.state.dragPosition });\n      this.setState({ dragPosition: null });\n    }\n  };\n\n  getStyle(position) {\n    return {\n      left: position.x,\n      top: position.y\n    };\n  }\n\n  render() {\n    return (\n      <div\n        className=\"draggable item--absolute\"\n        ref={this.ref}\n        onMouseDown={this.handleItemDragStart}\n        onMouseUp={this.handleItemDragEnd}\n        style={this.getStyle(this.state.dragPosition || this.props.position)}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default Draggable;\n","export function getOffset(el) {\n  const rect = el.getBoundingClientRect();\n  return {\n    x: rect.left + window.scrollX,\n    y: rect.top + window.scrollY\n  };\n}\n","import React from \"react\";\nimport Types from \"prop-types\";\nimport classnames from \"classnames\";\n\nconst Undraggable = ({ children, className, ...rest }) => (\n  <div className={classnames(\"undraggable\", className)} {...rest}>\n    {children}\n  </div>\n);\n\nUndraggable.propTypes = {\n  children: Types.node.isRequired,\n  className: Types.string\n};\n\nUndraggable.defaultProps = {\n  className: \"\"\n};\n\nexport default Undraggable;\n","import React, { useState } from \"react\";\nimport Types from \"prop-types\";\nimport Item from \"../Item\";\nimport { ItemComponent, NewItemForm } from \"../Item\";\nimport Sortable from \"react-sortablejs\";\nimport classnames from \"classnames\";\nimport { Undraggable } from \"../Draggable\";\n\nconst GroupComponent = ({\n  position,\n  title,\n  items,\n  timeStamp,\n  onChange,\n  onRemove\n}) => {\n  const shouldShowItemFormByDefault = !items.length;\n  const [showNewItemForm, setShowNewItemForm] = useState(\n    shouldShowItemFormByDefault\n  );\n\n  const [deleted, setDeleted] = useState(false);\n\n  function handleGroupDelete() {\n    setDeleted(true);\n\n    setTimeout(() => {\n      onRemove();\n    }, 200);\n  }\n\n  function toggleNewItemForm(e) {\n    setShowNewItemForm(!showNewItemForm);\n  }\n\n  function handleItemCreate(item) {\n    const editedGroup = cloneItem({ items: [...items, item] });\n    onChange(editedGroup);\n  }\n\n  function handleItemRemove(item) {\n    const filteredItems = items.filter(i => i.timeStamp !== item.timeStamp);\n\n    const editedGroup = cloneItem({ items: filteredItems });\n    onChange(editedGroup);\n    setShowNewItemForm(false);\n  }\n\n  function handleItemOrderChange(order) {\n    console.log(\n      title,\n      order,\n      items.map(i => i.timeStamp.toString())\n    );\n\n    const sortedItems = order.map(timeStamp =>\n      items.find(item => item.timeStamp === parseInt(timeStamp))\n    );\n    const editedGroup = cloneItem({ items: sortedItems });\n    onChange(editedGroup);\n  }\n\n  function mapItem(item) {\n    return (\n      <ItemComponent\n        key={item.timeStamp}\n        data-id={item.timeStamp}\n        title={item.title}\n        onClick={() => handleItemRemove(item)}\n      />\n    );\n  }\n\n  function cloneItem(params = {}) {\n    return new Item({\n      position,\n      title,\n      items,\n      timeStamp,\n      ...params\n    });\n  }\n\n  function getStyle() {\n    return {\n      transform: deleted ? \"scale(0.7)\" : \"\"\n    };\n  }\n\n  return (\n    <div\n      className={classnames(\"item group\", {\n        \"item--collapse\": deleted\n      })}\n      style={getStyle()}\n    >\n      {title && <span className=\"item-content\">{title}</span>}\n      <Undraggable className=\"item-add item-button\" onClick={toggleNewItemForm}>\n        +\n      </Undraggable>\n\n      <Undraggable\n        className=\"item-remove item-button\"\n        onClick={handleGroupDelete}\n      >\n        &times;\n      </Undraggable>\n\n      {(items.length || showNewItemForm) && (\n        <div className=\"group-items\">\n          <Undraggable>\n            <Sortable tag=\"ul\" onChange={handleItemOrderChange}>\n              {items.map(mapItem)}\n            </Sortable>\n\n            {showNewItemForm && (\n              <NewItemForm\n                isGrouped\n                onCreate={handleItemCreate}\n                onClose={toggleNewItemForm}\n              />\n            )}\n          </Undraggable>\n        </div>\n      )}\n    </div>\n  );\n};\n\nGroupComponent.propTypes = {\n  position: Types.shape({ x: Types.number, y: Types.number }).isRequired,\n  title: Types.string.isRequired,\n  items: Types.array.isRequired,\n  onChange: Types.func.isRequired,\n  onRemove: Types.func.isRequired\n};\n\nexport default React.memo(GroupComponent);\n","import React, { useState, useEffect } from \"react\";\nimport classnames from \"classnames\";\nimport \"./App.scss\";\n\nimport { NewItemForm } from \"./Item\";\nimport Position from \"./Position\";\nimport { GroupComponent } from \"./Group\";\nimport { Draggable } from \"./Draggable\";\n\nconst itemsFromLocalStorage = JSON.parse(\n  localStorage.getItem(\"dragly-items\") || \"[]\"\n);\n\nfunction App() {\n  const [history, setHistory] = useState([]);\n  const [items, setItems] = useState(itemsFromLocalStorage);\n  const [newItemPosition, setNewItemPosition] = useState(null);\n  const [isObfuscated, setIsObfuscated] = useState(false);\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", e => {\n      if (e.keyCode === 90 && (e.metaKey || e.ctrlKey)) {\n        e.preventDefault();\n        handleUndo();\n      }\n    });\n  });\n\n  function toggleAddItem(event) {\n    if (event.target !== event.currentTarget) return;\n\n    const position = new Position({ x: event.pageX, y: event.pageY });\n    setNewItemPosition(position);\n  }\n\n  function setItemsAndSave(newItems, saveHistory = true) {\n    if (saveHistory) {\n      setHistory([...history, items]);\n    }\n    setItems(newItems);\n    localStorage.setItem(\"dragly-items\", JSON.stringify(newItems));\n  }\n\n  function handleItemCreate(item) {\n    setItemsAndSave([...items, item]);\n    setNewItemPosition(null);\n  }\n\n  function handleItemChange(newValue, oldValue) {\n    const filteredItems = items.filter(i => i.timeStamp !== oldValue.timeStamp);\n\n    setItemsAndSave([...filteredItems, newValue]);\n    setNewItemPosition(null);\n  }\n\n  function handleItemRemove(item) {\n    const filteredItems = items.filter(i => i.timeStamp !== item.timeStamp);\n    setItemsAndSave([...filteredItems]);\n  }\n\n  function handleUndo() {\n    if (!history.length) return;\n\n    setItemsAndSave(history[history.length - 1] || [], false);\n\n    const newHistory = [...history];\n    newHistory.pop();\n    setHistory(newHistory);\n  }\n\n  function handleObfuscate() {\n    setIsObfuscated(!isObfuscated);\n  }\n\n  function mapGroup(group) {\n    return (\n      <Draggable\n        position={group.position}\n        onDragEnd={newPos =>\n          handleItemChange({ ...group, position: newPos }, group)\n        }\n        key={group.timeStamp}\n      >\n        <GroupComponent\n          {...group}\n          onRemove={() => handleItemRemove(group)}\n          onChange={newValue => handleItemChange(newValue, group)}\n        />\n      </Draggable>\n    );\n  }\n\n  const groupElements = items.map(group => {\n    return mapGroup(group);\n  });\n\n  return (\n    <div className=\"app\">\n      <div\n        className={classnames(\"board\", { obfuscated: isObfuscated })}\n        onClick={toggleAddItem}\n      >\n        <ul>{groupElements}</ul>\n        {newItemPosition && (\n          <NewItemForm\n            onCreate={handleItemCreate}\n            position={newItemPosition}\n            onClose={() => setNewItemPosition(null)}\n          />\n        )}\n        <button\n          className={classnames(\"undo action\", { visible: history.length })}\n          onClick={handleUndo}\n        >\n          <span role=\"img\" aria-label=\"Undo\">\n            🤭\n          </span>\n        </button>\n\n        <button\n          className={classnames(\"obfuscate action \", { visible: items.length })}\n          onClick={handleObfuscate}\n        >\n          <span role=\"img\" aria-label=\"Obfuscate\">\n            {isObfuscated ? \"🐵\" : \"🙈\"}\n          </span>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}