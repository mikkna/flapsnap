{"version":3,"sources":["Item/utils.js","Item/ItemComponent.js","Item/Item.js","Item/NewItemForm.js","Position/Position.js","Draggable/Draggable.js","Position/utils.js","Draggable/Undraggable.js","Group/GroupComponent.js","Group/utils.js","App.js","index.js"],"names":["isLink","str","RegExp","test","getStyleObject","position","left","x","top","y","ItemComponent","title","onClick","otherProps","useState","deleted","setDeleted","parseTitle","parsedTitle","replace","length","slice","setTimeout","className","classnames","href","rel","target","e","stopPropagation","defaultProps","Item","timeStamp","Date","now","items","this","NewItemFrom","isGrouped","onCreate","onClose","newItemTitle","setNewItemTitle","style","onSubmit","event","preventDefault","item","group","type","autoFocus","value","onChange","onKeyDown","keyCode","Position","Draggable","ref","createRef","state","dragPosition","dragStartOffset","isValidDragTarget","closest","handleItemDragStart","pointerPosition","pageX","pageY","elementPosition","el","rect","getBoundingClientRect","window","scrollX","scrollY","getOffset","currentTarget","document","addEventListener","handleItemDrag","newPosition","setState","handleItemDragEnd","removeEventListener","props","onDragEnd","onMouseDown","onMouseUp","getStyle","children","Component","Undraggable","rest","React","memo","onRemove","shouldShowItemFormByDefault","showNewItemForm","setShowNewItemForm","toggleNewItemForm","cloneItem","params","transform","tag","order","editedGroup","map","find","parseInt","key","data-id","filter","i","handleItemRemove","NewItemForm","text","textarea","createElement","body","appendChild","select","execCommand","removeChild","copyToClipboard","itemTitles","join","getCopiedText","itemsFromLocalStorage","JSON","parse","localStorage","getItem","App","history","setHistory","setItems","newItemPosition","setNewItemPosition","isObfuscated","setIsObfuscated","setItemsAndSave","newItems","setItem","stringify","handleItemChange","newValue","oldValue","filteredItems","handleUndo","newHistory","pop","mapGroup","newPos","useEffect","metaKey","ctrlKey","groupElements","obfuscated","process","visible","role","aria-label","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.cadf5100.chunk.js","sourcesContent":["export function isLink(str) {\n  const pattern = new RegExp(\n    \"^(https?:\\\\/\\\\/)?\" + // protocol\n    \"((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|localhost|\" + // domain name\n    \"((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))\" + // OR ip (v4) address\n    \"(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*\" + // port and path\n    \"(\\\\?[;&a-z\\\\d%_.~+=-]*)?\" + // query string\n      \"(\\\\#[-a-z\\\\d_]*)?$\",\n    \"i\"\n  ); // fragment locator\n  return !!pattern.test(str);\n}\n\nexport function getStyleObject(position) {\n  if (!position) return {};\n\n  return { left: position.x, top: position.y };\n}\n","import React, { useState } from \"react\";\nimport Types from \"prop-types\";\nimport { isLink } from \"./utils\";\nimport classnames from \"classnames\";\n\nconst ItemComponent = ({ title, onClick, ...otherProps }) => {\n  const [deleted, setDeleted] = useState(false);\n\n  function handleClick() {\n    setDeleted(true);\n\n    setTimeout(() => {\n      onClick();\n    }, 200);\n  }\n\n  function parseTitle() {\n    let urlSliceRegex = /(https?:\\/\\/)?(www\\.)?/;\n    if (isLink(title)) {\n      let parsedTitle = title.replace(urlSliceRegex, \"\");\n      if (parsedTitle.length > 43) {\n        return parsedTitle.slice(0, 40) + \"...\";\n      }\n      return parsedTitle;\n    }\n    return title;\n  }\n\n  return (\n    <li\n      {...otherProps}\n      onClick={handleClick}\n      className={classnames(\"item \", {\n        \"item--collapse\": deleted\n      })}\n    >\n      <span className=\"item-content\">\n        {isLink(title) ? (\n          <a\n            href={title}\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n            onClick={e => {\n              e.stopPropagation();\n            }}\n          >\n            {parseTitle()}\n          </a>\n        ) : (\n          parseTitle()\n        )}\n      </span>\n    </li>\n  );\n};\n\nItemComponent.propTypes = {\n  title: Types.string.isRequired,\n  onClick: Types.func\n};\n\nItemComponent.defaultProps = {\n  onClick: () => {}\n};\n\nexport default ItemComponent;\n","export default class Item {\n  constructor({\n    title = \"\",\n    position = null,\n    timeStamp = Date.now(),\n    items\n  } = {}) {\n    this.title = title;\n    this.position = position;\n    this.timeStamp = timeStamp;\n    this.items = items;\n  }\n}\n","import React, { useState } from \"react\";\nimport Types from \"prop-types\";\nimport Item from \"./Item\";\nimport { getStyleObject } from \"./utils\";\nimport classnames from \"classnames\";\n\nconst NewItemFrom = ({ isGrouped = false, position, onCreate, onClose }) => {\n  const [newItemTitle, setNewItemTitle] = useState(\"\");\n\n  function handleCreateItem(event) {\n    event.preventDefault();\n\n    if (!newItemTitle.length) return;\n\n    const item = new Item({ position, title: newItemTitle });\n    onCreate(item);\n    setNewItemTitle(\"\");\n  }\n\n  function handleInputKeyDown(event) {\n    switch (event.keyCode) {\n      case 27: // esc\n        return onClose();\n      case 8: // backspace\n        if (newItemTitle.length) return;\n        return onClose();\n      default:\n        return;\n    }\n  }\n\n  function handleTitleChange({ target: { value } }) {\n    setNewItemTitle(value);\n  }\n\n  function handleCreateGroup() {\n    const group = new Item({\n      position: position,\n      title: newItemTitle,\n      items: []\n    });\n    onCreate(group);\n  }\n\n  return (\n    <form\n      className={classnames(\"new-item item\", { \"item--absolute\": position })}\n      style={getStyleObject(position)}\n      onSubmit={isGrouped ? handleCreateItem : handleCreateGroup}\n    >\n      <input\n        type=\"text\"\n        className=\"item-content\"\n        autoFocus={true}\n        value={newItemTitle}\n        onChange={handleTitleChange}\n        onKeyDown={handleInputKeyDown}\n      />\n    </form>\n  );\n};\n\nNewItemFrom.propTypes = {\n  isGrouped: Types.bool,\n  position: Types.shape({}),\n  onCreate: Types.func.isRequired,\n  onClose: Types.func.isRequired\n};\n\nexport default NewItemFrom;\n","export default class Position {\n  constructor({ x = 0, y = 0 } = {}) {\n    this.x = x;\n    this.y = y;\n  }\n}\n","import React, { Component, createRef } from \"react\";\nimport Types from \"prop-types\";\nimport Position, { getOffset } from \"../Position\";\n\nclass Draggable extends Component {\n  static propTypes = {\n    children: Types.node.isRequired,\n    onDragEnd: Types.func.isRequired,\n    position: Types.shape({\n      x: Types.number.isRequired,\n      y: Types.number.isRequired\n    }).isRequired\n  };\n\n  ref = createRef();\n\n  state = {\n    dragPosition: null,\n  };\n\n  dragStartOffset = null;\n\n  isValidDragTarget = target => {\n    const isChildOfGroupItems = !!target.closest(\".undraggable\");\n    return !isChildOfGroupItems;\n  };\n\n  handleItemDragStart = event => {\n    if (!this.isValidDragTarget(event.target)) return;\n\n    const pointerPosition = { x: event.pageX, y: event.pageY };\n    const elementPosition = getOffset(event.currentTarget);\n    this.dragStartOffset = {\n      x: pointerPosition.x - elementPosition.x,\n      y: pointerPosition.y - elementPosition.y\n    };\n\n    document.addEventListener(\"mousemove\", this.handleItemDrag);\n  };\n\n  handleItemDrag = event => {\n    const newPosition = new Position({\n      x: event.pageX - this.dragStartOffset.x,\n      y: event.pageY - this.dragStartOffset.y\n    });\n\n    this.setState({\n      dragPosition: newPosition\n    });\n  };\n\n  handleItemDragEnd = () => {\n    document.removeEventListener(\"mousemove\", this.handleItemDrag);\n\n    if (this.state.dragPosition) {\n      this.props.onDragEnd({ ...this.state.dragPosition });\n      this.setState({ dragPosition: null });\n    }\n  };\n\n  getStyle(position) {\n    return {\n      left: position.x,\n      top: position.y\n    };\n  }\n\n  render() {\n    return (\n      <div\n        className=\"draggable item--absolute\"\n        ref={this.ref}\n        onMouseDown={this.handleItemDragStart}\n        onMouseUp={this.handleItemDragEnd}\n        style={this.getStyle(this.state.dragPosition || this.props.position)}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default Draggable;\n","export function getOffset(el) {\n  const rect = el.getBoundingClientRect();\n  return {\n    x: rect.left + window.scrollX,\n    y: rect.top + window.scrollY\n  };\n}\n","import React from \"react\";\nimport Types from \"prop-types\";\nimport classnames from \"classnames\";\n\nconst Undraggable = ({ children, className, ...rest }) => (\n  <div className={classnames(\"undraggable\", className)} {...rest}>\n    {children}\n  </div>\n);\n\nUndraggable.propTypes = {\n  children: Types.node.isRequired,\n  className: Types.string\n};\n\nUndraggable.defaultProps = {\n  className: \"\"\n};\n\nexport default Undraggable;\n","import React, { useState } from \"react\";\nimport Types from \"prop-types\";\nimport Item from \"../Item\";\nimport { ItemComponent, NewItemForm } from \"../Item\";\nimport Sortable from \"react-sortablejs\";\nimport classnames from \"classnames\";\nimport { Undraggable } from \"../Draggable\";\nimport { getCopiedText, copyToClipboard } from './utils';\n\nconst GroupComponent = ({\n  position,\n  title,\n  items,\n  timeStamp,\n  onChange,\n  onRemove\n}) => {\n  const shouldShowItemFormByDefault = !items.length;\n  const [showNewItemForm, setShowNewItemForm] = useState(\n    shouldShowItemFormByDefault\n  );\n\n  const [deleted, setDeleted] = useState(false);\n\n  function handleGroupDelete() {\n    setDeleted(true);\n\n    setTimeout(() => {\n      onRemove();\n    }, 200);\n  }\n\n  function toggleNewItemForm(e) {\n    setShowNewItemForm(!showNewItemForm);\n  }\n\n  function handleItemCreate(item) {\n    const editedGroup = cloneItem({ items: [...items, item] });\n    onChange(editedGroup);\n  }\n\n  function handleItemRemove(item) {\n    const filteredItems = items.filter(i => i.timeStamp !== item.timeStamp);\n\n    const editedGroup = cloneItem({ items: filteredItems });\n    onChange(editedGroup);\n    setShowNewItemForm(false);\n  }\n\n  function handleItemOrderChange(order) {\n    const sortedItems = order.map(timeStamp =>\n      items.find(item => item.timeStamp === parseInt(timeStamp))\n    );\n    const editedGroup = cloneItem({ items: sortedItems });\n    onChange(editedGroup);\n  }\n\n  function handleCopy() {\n    copyToClipboard(getCopiedText({ title, items }));\n  }\n\n  function mapItem(item) {\n    return (\n      <ItemComponent\n        key={item.timeStamp}\n        data-id={item.timeStamp}\n        title={item.title}\n        onClick={() => handleItemRemove(item)}\n      />\n    );\n  }\n\n  function cloneItem(params = {}) {\n    return new Item({\n      position,\n      title,\n      items,\n      timeStamp,\n      ...params\n    });\n  }\n\n  function getStyle() {\n    return {\n      transform: deleted ? \"scale(0.7)\" : \"\"\n    };\n  }\n\n  return (\n    <div\n      className={classnames(\"item group\", {\n        \"item--collapse\": deleted\n      })}\n      style={getStyle()}\n    >\n      {title && <span className=\"item-content\">{title}</span>}\n      <Undraggable className=\"item-add item-button\" onClick={toggleNewItemForm}>\n        +\n      </Undraggable>\n\n      <Undraggable\n        className=\"item-remove item-button\"\n        onClick={handleGroupDelete}\n      >\n        &times;\n      </Undraggable>\n\n      {(items.length || showNewItemForm) && (\n        <div className=\"group-items\">\n          <Undraggable>\n            <Sortable tag=\"ul\" onChange={handleItemOrderChange}>\n              {items.map(mapItem)}\n            </Sortable>\n\n            {showNewItemForm && (\n              <NewItemForm\n                isGrouped\n                onCreate={handleItemCreate}\n                onClose={toggleNewItemForm}\n              />\n            )}\n          </Undraggable>\n        </div>\n      )}\n      <Undraggable onClick={handleCopy} className=\"item-copy\">\n        <button>copy</button>\n      </Undraggable>\n    </div>\n  );\n};\n\nGroupComponent.propTypes = {\n  position: Types.shape({ x: Types.number, y: Types.number }).isRequired,\n  title: Types.string.isRequired,\n  items: Types.array.isRequired,\n  onChange: Types.func.isRequired,\n  onRemove: Types.func.isRequired\n};\n\nexport default React.memo(GroupComponent);\n","export function getCopiedText({ title, items = [] }) {\n  const itemTitles = items.map(({ title }) => `- ${title}`);\n\n  return [title, ...itemTitles].join('\\n');\n}\n\nexport function copyToClipboard(text) {\n  const textarea = document.createElement('textarea');\n  textarea.style = {\n    position: 'absolute',\n    top: '-1000px',\n  }\n  textarea.value = text;\n  document.body.appendChild(textarea);\n  textarea.select();\n  document.execCommand('copy');\n  document.body.removeChild(textarea);\n}","import React, { useState, useEffect } from \"react\";\nimport classnames from \"classnames\";\nimport \"./App.scss\";\n\nimport { NewItemForm } from \"./Item\";\nimport Position from \"./Position\";\nimport { GroupComponent } from \"./Group\";\nimport { Draggable } from \"./Draggable\";\n\nconst itemsFromLocalStorage = JSON.parse(\n  localStorage.getItem(\"dragly-items\") || \"[]\"\n);\n\nfunction App() {\n  const [history, setHistory] = useState([]);\n  const [items, setItems] = useState(itemsFromLocalStorage);\n  const [newItemPosition, setNewItemPosition] = useState(null);\n  const [isObfuscated, setIsObfuscated] = useState(false);\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", e => {\n      if (e.keyCode === 90 && (e.metaKey || e.ctrlKey)) {\n        e.preventDefault();\n        handleUndo();\n      }\n    });\n  });\n\n  function toggleAddItem(event) {\n    if (event.target !== event.currentTarget) return;\n\n    const position = new Position({ x: event.pageX, y: event.pageY });\n    setNewItemPosition(position);\n  }\n\n  function setItemsAndSave(newItems, saveHistory = true) {\n    if (saveHistory) {\n      setHistory([...history, items]);\n    }\n    setItems(newItems);\n    localStorage.setItem(\"dragly-items\", JSON.stringify(newItems));\n  }\n\n  function handleItemCreate(item) {\n    setItemsAndSave([...items, item]);\n    setNewItemPosition(null);\n  }\n\n  function handleItemChange(newValue, oldValue) {\n    const filteredItems = items.filter(i => i.timeStamp !== oldValue.timeStamp);\n\n    setItemsAndSave([...filteredItems, newValue]);\n    setNewItemPosition(null);\n  }\n\n  function handleItemRemove(item) {\n    const filteredItems = items.filter(i => i.timeStamp !== item.timeStamp);\n    setItemsAndSave([...filteredItems]);\n  }\n\n  function handleUndo() {\n    if (!history.length) return;\n\n    setItemsAndSave(history[history.length - 1] || [], false);\n\n    const newHistory = [...history];\n    newHistory.pop();\n    setHistory(newHistory);\n  }\n\n  function handleObfuscate() {\n    setIsObfuscated(!isObfuscated);\n  }\n\n  function mapGroup(group) {\n    return (\n      <Draggable\n        position={group.position}\n        onDragEnd={newPos =>\n          handleItemChange({ ...group, position: newPos }, group)\n        }\n        key={group.timeStamp}\n      >\n        <GroupComponent\n          {...group}\n          onRemove={() => handleItemRemove(group)}\n          onChange={newValue => handleItemChange(newValue, group)}\n        />\n      </Draggable>\n    );\n  }\n\n  const groupElements = items.map(group => {\n    return mapGroup(group);\n  });\n\n  const env = process.env.NODE_ENV;\n\n  return (\n    <div className=\"app\">\n      <div\n        className={classnames(\"board\", { obfuscated: isObfuscated }, env)}\n        onClick={toggleAddItem}\n      >\n        <ul>{groupElements}</ul>\n        {newItemPosition && (\n          <NewItemForm\n            onCreate={handleItemCreate}\n            position={newItemPosition}\n            onClose={() => setNewItemPosition(null)}\n          />\n        )}\n        <button\n          className={classnames(\"undo action\", { visible: history.length })}\n          onClick={handleUndo}\n        >\n          <span role=\"img\" aria-label=\"Undo\">\n            🤭\n          </span>\n        </button>\n\n        <button\n          className={classnames(\"obfuscate action \", { visible: items.length })}\n          onClick={handleObfuscate}\n        >\n          <span role=\"img\" aria-label=\"Obfuscate\">\n            {isObfuscated ? \"🐵\" : \"🙈\"}\n          </span>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}